"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[291],{2011:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"module-1/chapter-1-4","title":"1.4 Package Development & Launch Files","description":"ROS 2 packages are the fundamental unit of organization\u2014they contain nodes, launch files, configuration files, and robot descriptions. Launch files automate the startup of multi-node systems, eliminating the need to manually run dozens of terminals.","source":"@site/docs/module-1/chapter-1-4.md","sourceDirName":"module-1","slug":"/module-1/chapter-1-4","permalink":"/physical-ai-humanoid-robotics-book/docs/module-1/chapter-1-4","draft":false,"unlisted":false,"editUrl":"https://github.com/billy-pk/physical-ai-humanoid-robotics-book/tree/main/frontend/docs/module-1/chapter-1-4.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"1.4 Package Development & Launch Files"},"sidebar":"defaultSidebar","previous":{"title":"1.3 URDF for Humanoid Robots","permalink":"/physical-ai-humanoid-robotics-book/docs/module-1/chapter-1-3"},"next":{"title":"1.5 Parameter Management & Best Practices","permalink":"/physical-ai-humanoid-robotics-book/docs/module-1/chapter-1-5"}}');var i=s(4848),r=s(8453);const t={sidebar_position:5,title:"1.4 Package Development & Launch Files"},l="Chapter 1.4: Package Development & Launch Files",a={},c=[{value:"Learning Outcomes",id:"learning-outcomes",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Part 1: ROS 2 Package Structure",id:"part-1-ros-2-package-structure",level:2},{value:"What is a ROS 2 Package?",id:"what-is-a-ros-2-package",level:3},{value:"Package Types",id:"package-types",level:3},{value:"Part 2: Hands-On Tutorial",id:"part-2-hands-on-tutorial",level:2},{value:"Project 1: Create Your First ROS 2 Package",id:"project-1-create-your-first-ros-2-package",level:3},{value:"Project 2: Add Nodes to Package",id:"project-2-add-nodes-to-package",level:3},{value:"Project 3: Create Launch File",id:"project-3-create-launch-file",level:3},{value:"Project 4: Advanced Launch File with RViz2",id:"project-4-advanced-launch-file-with-rviz2",level:3},{value:"Step 3: Debugging Common Issues",id:"step-3-debugging-common-issues",level:3},{value:"Issue 1: &quot;Package &#39;humanoid_control&#39; not found&quot;",id:"issue-1-package-humanoid_control-not-found",level:4},{value:"Issue 2: &quot;No executable found&quot;",id:"issue-2-no-executable-found",level:4},{value:"Issue 3: Launch file not found",id:"issue-3-launch-file-not-found",level:4},{value:"Issue 4: &quot;colcon: command not found&quot;",id:"issue-4-colcon-command-not-found",level:4},{value:"Part 3: Advanced Topics (Optional)",id:"part-3-advanced-topics-optional",level:2},{value:"Multi-Package Workspaces",id:"multi-package-workspaces",level:3},{value:"Launch File Composition",id:"launch-file-composition",level:3},{value:"Conditional Node Launching",id:"conditional-node-launching",level:3},{value:"Integration with Capstone",id:"integration-with-capstone",level:2},{value:"Summary",id:"summary",level:2},{value:"Exercises",id:"exercises",level:2},{value:"Exercise 1: Create Custom Package (Required)",id:"exercise-1-create-custom-package-required",level:3},{value:"Exercise 2: Multi-Robot Launch (Challenge)",id:"exercise-2-multi-robot-launch-challenge",level:3},{value:"Exercise 3: Package with Dependencies (Advanced)",id:"exercise-3-package-with-dependencies-advanced",level:3},{value:"Additional Resources",id:"additional-resources",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"chapter-14-package-development--launch-files",children:"Chapter 1.4: Package Development & Launch Files"})}),"\n",(0,i.jsx)(e.p,{children:"ROS 2 packages are the fundamental unit of organization\u2014they contain nodes, launch files, configuration files, and robot descriptions. Launch files automate the startup of multi-node systems, eliminating the need to manually run dozens of terminals."}),"\n",(0,i.jsx)(e.h2,{id:"learning-outcomes",children:"Learning Outcomes"}),"\n",(0,i.jsx)(e.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Create"})," ROS 2 Python packages using `ros2 pkg create`"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Structure"})," packages with proper `package.xml` and `setup.py` configuration"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Build"})," workspaces with `colcon` and manage dependencies"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Write"})," launch files in Python to coordinate multiple nodes"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Deploy"})," complete robot systems with a single command"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.strong,{children:"ROS 2 Humble installed"})}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Completed Chapter 1.2"})," (Python nodes with rclpy)"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Completed Chapter 1.3"})," (URDF files)"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Basic understanding"})," of Python packaging"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"part-1-ros-2-package-structure",children:"Part 1: ROS 2 Package Structure"}),"\n",(0,i.jsx)(e.h3,{id:"what-is-a-ros-2-package",children:"What is a ROS 2 Package?"}),"\n",(0,i.jsxs)(e.p,{children:["A ",(0,i.jsx)(e.strong,{children:"package"})," is a directory containing:"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Source code"}),": Python nodes (`.py` files)"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Configuration"}),": `package.xml`, `setup.py`, `setup.cfg`"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Launch files"}),": `.launch.py` files"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Resources"}),": URDF files, meshes, config YAML files"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Example package structure"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"my_humanoid_control/\n\u251c\u2500\u2500 package.xml           # Package metadata and dependencies\n\u251c\u2500\u2500 setup.py              # Python package installation config\n\u251c\u2500\u2500 setup.cfg             # Entry points for executables\n\u251c\u2500\u2500 resource/             # Package marker files\n\u251c\u2500\u2500 my_humanoid_control/  # Python module directory\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 joint_controller.py\n\u2502   \u2514\u2500\u2500 sensor_processor.py\n\u251c\u2500\u2500 launch/               # Launch files\n\u2502   \u2514\u2500\u2500 robot_bringup.launch.py\n\u251c\u2500\u2500 urdf/                 # Robot descriptions\n\u2502   \u2514\u2500\u2500 humanoid.urdf\n\u2514\u2500\u2500 config/               # Parameter files\n    \u2514\u2500\u2500 controller_params.yaml\n"})}),"\n",(0,i.jsx)(e.h3,{id:"package-types",children:"Package Types"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"Type"}),(0,i.jsx)(e.th,{children:"Language"}),(0,i.jsx)(e.th,{children:"Build System"}),(0,i.jsx)(e.th,{children:"Use Case"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Python"})}),(0,i.jsx)(e.td,{children:"Python"}),(0,i.jsx)(e.td,{children:"setuptools"}),(0,i.jsx)(e.td,{children:"Most rapid development"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"CMake"})}),(0,i.jsx)(e.td,{children:"C++"}),(0,i.jsx)(e.td,{children:"CMake"}),(0,i.jsx)(e.td,{children:"Performance-critical nodes"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Hybrid"})}),(0,i.jsx)(e.td,{children:"C++ + Python"}),(0,i.jsx)(e.td,{children:"CMake + setuptools"}),(0,i.jsx)(e.td,{children:"Large projects"})]})]})]}),"\n",(0,i.jsxs)(e.p,{children:["This chapter focuses on ",(0,i.jsx)(e.strong,{children:"Python packages"})," (most common for beginners)."]}),"\n",(0,i.jsx)(e.h2,{id:"part-2-hands-on-tutorial",children:"Part 2: Hands-On Tutorial"}),"\n",(0,i.jsx)(e.h3,{id:"project-1-create-your-first-ros-2-package",children:"Project 1: Create Your First ROS 2 Package"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Goal"}),": Create a package for humanoid joint control with publisher/subscriber nodes."]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Step 1: Create workspace"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Create workspace directory\nmkdir -p ~/ros2_ws/src\ncd ~/ros2_ws/src\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Step 2: Create package"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ros2 pkg create --build-type ament_python humanoid_control \\\n  --dependencies rclpy std_msgs sensor_msgs geometry_msgs\n\n# Output:\n# going to create a new package\n# package name: humanoid_control\n# destination directory: /home/user/ros2_ws/src\n# package format: 3\n# version: 0.0.0\n# ...\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Explanation"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"`--build-type ament_python`: Python package"}),"\n",(0,i.jsx)(e.li,{children:"`--dependencies`: Auto-add dependencies to `package.xml`"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Step 3: Examine generated files"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"cd humanoid_control\nls -la\n"})}),"\n",(0,i.jsx)(e.p,{children:"Output:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"humanoid_control/\n\u251c\u2500\u2500 humanoid_control/\n\u2502   \u2514\u2500\u2500 __init__.py\n\u251c\u2500\u2500 package.xml\n\u251c\u2500\u2500 resource/\n\u2502   \u2514\u2500\u2500 humanoid_control\n\u251c\u2500\u2500 setup.cfg\n\u251c\u2500\u2500 setup.py\n\u2514\u2500\u2500 test/\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"project-2-add-nodes-to-package",children:"Project 2: Add Nodes to Package"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Step 1: Create joint controller node"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"File"}),": `humanoid_control/humanoid_control/joint_controller.py`"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:'#!/usr/bin/env python3\n"""\nHumanoid Joint Controller Node\nPublishes joint commands for humanoid arms\nROS 2 Humble | Python 3.10+\n"""\nimport rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import JointState\nimport math\n\nclass HumanoidJointController(Node):\n    """\n    Publishes joint commands to /joint_commands topic.\n    Simulates sinusoidal arm motion.\n    """\n    def __init__(self):\n        super().__init__(\'humanoid_joint_controller\')\n        \n        # Publisher for joint states\n        self.publisher_ = self.create_publisher(\n            JointState,\n            \'/joint_commands\',\n            10\n        )\n        \n        # Timer for 50 Hz control loop\n        self.timer = self.create_timer(0.02, self.control_loop)\n        \n        # Joint names\n        self.joint_names = [\n            \'left_shoulder\',\n            \'left_elbow\',\n            \'right_shoulder\',\n            \'right_elbow\'\n        ]\n        \n        self.counter = 0\n        self.get_logger().info(\'Humanoid Joint Controller started (50 Hz)\')\n    \n    def control_loop(self):\n        """Generate and publish joint commands."""\n        msg = JointState()\n        msg.header.stamp = self.get_clock().now().to_msg()\n        msg.name = self.joint_names\n        \n        # Generate sinusoidal motion\n        t = self.counter * 0.02  # Time in seconds\n        msg.position = [\n            0.5 * math.sin(t),                # Left shoulder\n            0.8 * math.sin(t * 1.5),          # Left elbow\n            0.5 * math.sin(t + math.pi),      # Right shoulder (out of phase)\n            0.8 * math.sin(t * 1.5 + math.pi) # Right elbow\n        ]\n        \n        msg.velocity = [0.0] * len(self.joint_names)\n        msg.effort = [0.0] * len(self.joint_names)\n        \n        self.publisher_.publish(msg)\n        self.counter += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = HumanoidJointController()\n    \n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    \n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Step 2: Create sensor processor node"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"File"}),": `humanoid_control/humanoid_control/sensor_processor.py`"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:'#!/usr/bin/env python3\n"""\nSensor Processor Node\nProcesses joint state feedback\nROS 2 Humble | Python 3.10+\n"""\nimport rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import JointState\n\nclass SensorProcessor(Node):\n    """\n    Subscribes to /joint_commands and logs joint states.\n    """\n    def __init__(self):\n        super().__init__(\'sensor_processor\')\n        \n        self.subscription = self.create_subscription(\n            JointState,\n            \'/joint_commands\',\n            self.joint_state_callback,\n            10\n        )\n        \n        self.get_logger().info(\'Sensor Processor started\')\n    \n    def joint_state_callback(self, msg):\n        """Process joint state messages."""\n        if len(msg.position) > 0:\n            # Log first joint position (left shoulder)\n            self.get_logger().info(\n                f\'{msg.name[0]}: {msg.position[0]:.3f} rad\',\n                throttle_duration_sec=1.0  # Log max once per second\n            )\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = SensorProcessor()\n    \n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    \n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Step 3: Register nodes in setup.py"})}),"\n",(0,i.jsx)(e.p,{children:"Edit `setup.py` to add entry points:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from setuptools import find_packages, setup\n\npackage_name = 'humanoid_control'\n\nsetup(\n    name=package_name,\n    version='0.0.1',\n    packages=find_packages(exclude=['test']),\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        # Install launch files\n        ('share/' + package_name + '/launch', ['launch/robot_bringup.launch.py']),\n        # Install URDF files\n        ('share/' + package_name + '/urdf', ['urdf/simple_arm.urdf']),\n        # Install config files\n        ('share/' + package_name + '/config', ['config/params.yaml']),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='Your Name',\n    maintainer_email='you@example.com',\n    description='Humanoid robot control package',\n    license='Apache-2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'joint_controller = humanoid_control.joint_controller:main',\n            'sensor_processor = humanoid_control.sensor_processor:main',\n        ],\n    },\n)\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Key sections"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Lines 15 to 20"}),": Install additional files (launch, URDF, config)"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Lines 28 to 31"}),": Entry points create executable commands"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Step 4: Build the package"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select humanoid_control\n\n# Output:\n# Starting >>> humanoid_control\n# Finished <<< humanoid_control [1.23s]\n#\n# Summary: 1 package finished [1.45s]\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Step 5: Source the workspace"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'source ~/ros2_ws/install/setup.bash\n\n# Add to ~/.bashrc for automatic sourcing:\necho "source ~/ros2_ws/install/setup.bash" >> ~/.bashrc\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Step 6: Run the nodes"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Terminal 1: Joint controller\nros2 run humanoid_control joint_controller\n\n# Terminal 2: Sensor processor\nros2 run humanoid_control sensor_processor\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Expected Output"})," (Terminal 2):"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"[INFO] [sensor_processor]: Sensor Processor started\n[INFO] [sensor_processor]: left_shoulder: 0.041 rad\n[INFO] [sensor_processor]: left_shoulder: 0.082 rad\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"project-3-create-launch-file",children:"Project 3: Create Launch File"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Goal"}),": Start both nodes with a single command using a launch file."]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Step 1: Create launch directory"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"cd ~/ros2_ws/src/humanoid_control\nmkdir -p launch\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Step 2: Write launch file"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"File"}),": `launch/robot_bringup.launch.py`"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"#!/usr/bin/env python3\n\"\"\"\nRobot Bringup Launch File\nStarts joint controller and sensor processor nodes\n\"\"\"\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    \"\"\"\n    Launch file for humanoid control system.\n    \n    Starts:\n    - joint_controller: Publishes joint commands\n    - sensor_processor: Processes joint feedback\n    \"\"\"\n    return LaunchDescription([\n        # Joint Controller Node\n        Node(\n            package='humanoid_control',\n            executable='joint_controller',\n            name='joint_controller',\n            output='screen',\n            parameters=[{\n                'use_sim_time': False\n            }]\n        ),\n        \n        # Sensor Processor Node\n        Node(\n            package='humanoid_control',\n            executable='sensor_processor',\n            name='sensor_processor',\n            output='screen',\n            parameters=[{\n                'use_sim_time': False\n            }]\n        ),\n    ])\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Explanation"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Lines 6 to 7"}),": Import launch system modules"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Lines 19 to 28"}),": Define first node with package, executable, output mode"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Lines 30 to 38"}),": Define second node"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"output='screen'"}),": Display logs in terminal (vs. log files)"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Step 3: Rebuild with launch file"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select humanoid_control\nsource install/setup.bash\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Step 4: Run launch file"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ros2 launch humanoid_control robot_bringup.launch.py\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Expected Output"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"[INFO] [launch]: All log files can be found below /home/user/.ros/log/...\n[INFO] [launch]: Default logging verbosity is set to INFO\n[INFO] [joint_controller]: Humanoid Joint Controller started (50 Hz)\n[INFO] [sensor_processor]: Sensor Processor started\n[INFO] [sensor_processor]: left_shoulder: 0.041 rad\n[INFO] [sensor_processor]: left_shoulder: 0.123 rad\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Stop all nodes"}),": `Ctrl+C` once"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"project-4-advanced-launch-file-with-rviz2",children:"Project 4: Advanced Launch File with RViz2"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Goal"}),": Launch nodes + URDF visualization in RViz2 automatically."]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"File"}),": `launch/robot_visualization.launch.py`"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"#!/usr/bin/env python3\n\"\"\"\nRobot Visualization Launch File\nLaunches controller, state publisher, and RViz2\n\"\"\"\nimport os\nfrom ament_index_python.packages import get_package_share_directory\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\n\ndef generate_launch_description():\n    # Get package directory\n    pkg_dir = get_package_share_directory('humanoid_control')\n    \n    # Path to URDF file\n    urdf_file = os.path.join(pkg_dir, 'urdf', 'simple_arm.urdf')\n    \n    # Read URDF content\n    with open(urdf_file, 'r') as file:\n        robot_description = file.read()\n    \n    return LaunchDescription([\n        # Declare launch arguments\n        DeclareLaunchArgument(\n            'use_sim_time',\n            default_value='false',\n            description='Use simulation time'\n        ),\n        \n        # Robot State Publisher (publishes robot transforms)\n        Node(\n            package='robot_state_publisher',\n            executable='robot_state_publisher',\n            name='robot_state_publisher',\n            output='screen',\n            parameters=[{\n                'robot_description': robot_description,\n                'use_sim_time': LaunchConfiguration('use_sim_time')\n            }]\n        ),\n        \n        # Joint State Publisher GUI (manual joint control)\n        Node(\n            package='joint_state_publisher_gui',\n            executable='joint_state_publisher_gui',\n            name='joint_state_publisher_gui',\n            output='screen'\n        ),\n        \n        # RViz2\n        Node(\n            package='rviz2',\n            executable='rviz2',\n            name='rviz2',\n            output='screen',\n            arguments=['-d', os.path.join(pkg_dir, 'config', 'robot_view.rviz')]\n        ),\n        \n        # Joint Controller\n        Node(\n            package='humanoid_control',\n            executable='joint_controller',\n            name='joint_controller',\n            output='screen'\n        ),\n    ])\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Explanation"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Lines 14 to 21"}),": Load URDF file from package"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Lines 25 to 29"}),": Declare launch argument (can override from command line)"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Lines 31 to 41"}),": `robot_state_publisher` converts URDF \u2192 TF transforms"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Lines 43 to 49"}),": GUI for manual joint control"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Lines 51 to 57"}),": RViz2 with custom config file"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Run"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ros2 launch humanoid_control robot_visualization.launch.py\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"step-3-debugging-common-issues",children:"Step 3: Debugging Common Issues"}),"\n",(0,i.jsx)(e.h4,{id:"issue-1-package-humanoid_control-not-found",children:"Issue 1: \"Package 'humanoid_control' not found\""}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Cause"}),": Workspace not sourced after build"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Solution"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"cd ~/ros2_ws\nsource install/setup.bash\n"})}),"\n",(0,i.jsx)(e.h4,{id:"issue-2-no-executable-found",children:'Issue 2: "No executable found"'}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Cause"}),": Entry point not defined in `setup.py`"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Solution"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"# In setup.py, add:\nentry_points={\n    'console_scripts': [\n        'joint_controller = humanoid_control.joint_controller:main',\n    ],\n},\n"})}),"\n",(0,i.jsx)(e.p,{children:"Then rebuild: `colcon build --packages-select humanoid_control`"}),"\n",(0,i.jsx)(e.h4,{id:"issue-3-launch-file-not-found",children:"Issue 3: Launch file not found"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Cause"}),": Launch file not installed in `setup.py`"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Solution"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"# In setup.py data_files:\n('share/' + package_name + '/launch', ['launch/robot_bringup.launch.py']),\n"})}),"\n",(0,i.jsx)(e.p,{children:"Rebuild after modifying `setup.py`."}),"\n",(0,i.jsx)(e.h4,{id:"issue-4-colcon-command-not-found",children:'Issue 4: "colcon: command not found"'}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Cause"}),": colcon not installed"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Solution"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"sudo apt install python3-colcon-common-extensions\n"})}),"\n",(0,i.jsx)(e.h2,{id:"part-3-advanced-topics-optional",children:"Part 3: Advanced Topics (Optional)"}),"\n",(0,i.jsx)(e.h3,{id:"multi-package-workspaces",children:"Multi-Package Workspaces"}),"\n",(0,i.jsx)(e.p,{children:"Real projects have multiple packages:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"ros2_ws/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 humanoid_control/      # Control nodes\n\u2502   \u251c\u2500\u2500 humanoid_description/  # URDF files\n\u2502   \u251c\u2500\u2500 humanoid_navigation/   # Nav2 config\n\u2502   \u2514\u2500\u2500 humanoid_perception/   # Vision nodes\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Build all packages"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"colcon build  # Builds all packages in src/\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Build specific package"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"colcon build --packages-select humanoid_control\n"})}),"\n",(0,i.jsx)(e.h3,{id:"launch-file-composition",children:"Launch File Composition"}),"\n",(0,i.jsx)(e.p,{children:"Include other launch files:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from launch.actions import IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\n\nIncludeLaunchDescription(\n    PythonLaunchDescriptionSource([\n        os.path.join(pkg_dir, 'launch', 'sensors.launch.py')\n    ])\n)\n"})}),"\n",(0,i.jsx)(e.h3,{id:"conditional-node-launching",children:"Conditional Node Launching"}),"\n",(0,i.jsx)(e.p,{children:"Start nodes based on conditions:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from launch.conditions import IfCondition\n\nNode(\n    package='humanoid_control',\n    executable='joint_controller',\n    condition=IfCondition(LaunchConfiguration('use_controller'))\n)\n"})}),"\n",(0,i.jsx)(e.p,{children:"Run with:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ros2 launch my_pkg robot.launch.py use_controller:=true\n"})}),"\n",(0,i.jsx)(e.h2,{id:"integration-with-capstone",children:"Integration with Capstone"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"How this chapter contributes"})," to the Week 13 autonomous humanoid:"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Capstone workspace"})," will have 5+ packages:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"capstone_ws/\n\u251c\u2500\u2500 humanoid_description/  # URDF models\n\u251c\u2500\u2500 humanoid_bringup/      # Launch files\n\u251c\u2500\u2500 voice_control/         # Whisper node\n\u251c\u2500\u2500 llm_planner/           # GPT-4 planning\n\u2514\u2500\u2500 navigation/            # Nav2 config\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Master launch file"})," starts entire system:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ros2 launch humanoid_bringup full_system.launch.py\n"})}),"\n",(0,i.jsx)(e.p,{children:"This single command launches:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Voice input node (Whisper)"}),"\n",(0,i.jsx)(e.li,{children:"LLM planner (GPT-4)"}),"\n",(0,i.jsx)(e.li,{children:"Navigation stack (Nav2)"}),"\n",(0,i.jsx)(e.li,{children:"Object detection (YOLO)"}),"\n",(0,i.jsx)(e.li,{children:"Joint controllers"}),"\n",(0,i.jsx)(e.li,{children:"Gazebo/Isaac Sim"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Understanding package structure and launch files is critical for managing complex multi-node systems."}),"\n",(0,i.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(e.p,{children:"You learned:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u2705 Created ",(0,i.jsx)(e.strong,{children:"ROS 2 Python packages"})," with proper structure"]}),"\n",(0,i.jsxs)(e.li,{children:["\u2705 Configured ",(0,i.jsx)(e.strong,{children:"`package.xml`"})," and ",(0,i.jsx)(e.strong,{children:"`setup.py`"})," with dependencies and entry points"]}),"\n",(0,i.jsxs)(e.li,{children:["\u2705 Built packages with ",(0,i.jsx)(e.strong,{children:"colcon"})," and sourced workspaces"]}),"\n",(0,i.jsxs)(e.li,{children:["\u2705 Wrote ",(0,i.jsx)(e.strong,{children:"launch files"})," to start multiple nodes with one command"]}),"\n",(0,i.jsx)(e.li,{children:"\u2705 Integrated URDF, nodes, and visualization in automated launch sequences"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Next steps"}),": In Chapter 1.5, you'll learn parameter management, QoS profiles, and best practices for production-ready ROS 2 systems."]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"exercises",children:"Exercises"}),"\n",(0,i.jsx)(e.h3,{id:"exercise-1-create-custom-package-required",children:"Exercise 1: Create Custom Package (Required)"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Objective"}),": Create a package for a temperature monitoring system."]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Tasks"}),":"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"Create package `temperature_monitor`"}),"\n",(0,i.jsx)(e.li,{children:"Add node `temp_publisher.py` (publishes random temps 20 to 30\xb0C to `/temperature`)"}),"\n",(0,i.jsx)(e.li,{children:"Add node `temp_analyzer.py` (subscribes, logs if > 25\xb0C)"}),"\n",(0,i.jsx)(e.li,{children:"Create launch file starting both nodes"}),"\n",(0,i.jsx)(e.li,{children:"Build and test"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,i.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(e.li,{className:"task-list-item",children:[(0,i.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Package builds without errors"]}),"\n",(0,i.jsxs)(e.li,{className:"task-list-item",children:[(0,i.jsx)(e.input,{type:"checkbox",disabled:!0})," ","`ros2 run temperature_monitor temp_publisher` works"]}),"\n",(0,i.jsxs)(e.li,{className:"task-list-item",children:[(0,i.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Launch file starts both nodes"]}),"\n",(0,i.jsxs)(e.li,{className:"task-list-item",children:[(0,i.jsx)(e.input,{type:"checkbox",disabled:!0})," ","`ros2 topic echo /temperature` shows data"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Estimated Time"}),": 60 minutes"]}),"\n",(0,i.jsx)(e.h3,{id:"exercise-2-multi-robot-launch-challenge",children:"Exercise 2: Multi-Robot Launch (Challenge)"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Objective"}),": Launch multiple instances of the same node with different namespaces."]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Tasks"}),":"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"Modify launch file to start 3 joint controllers"}),"\n",(0,i.jsxs)(e.li,{children:["Each controller publishes to:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"`/robot1/joint_commands`"}),"\n",(0,i.jsx)(e.li,{children:"`/robot2/joint_commands`"}),"\n",(0,i.jsx)(e.li,{children:"`/robot3/joint_commands`"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Hint"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"Node(\n    package='humanoid_control',\n    executable='joint_controller',\n    name='joint_controller',\n    namespace='robot1',  # This adds /robot1 prefix\n    output='screen'\n)\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,i.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(e.li,{className:"task-list-item",children:[(0,i.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Launch file starts 3 controllers"]}),"\n",(0,i.jsxs)(e.li,{className:"task-list-item",children:[(0,i.jsx)(e.input,{type:"checkbox",disabled:!0})," ","`ros2 topic list` shows 3 separate topics"]}),"\n",(0,i.jsxs)(e.li,{className:"task-list-item",children:[(0,i.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Each topic publishes independently"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Estimated Time"}),": 45 minutes"]}),"\n",(0,i.jsx)(e.h3,{id:"exercise-3-package-with-dependencies-advanced",children:"Exercise 3: Package with Dependencies (Advanced)"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Objective"}),": Create a package that depends on another package."]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Tasks"}),":"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"Create package `robot_description` (contains URDF files only)"}),"\n",(0,i.jsx)(e.li,{children:"Create package `robot_control` (depends on `robot_description`)"}),"\n",(0,i.jsx)(e.li,{children:"Launch file in `robot_control` loads URDF from `robot_description`"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Hints"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Add dependency in `package.xml`:","\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<depend>robot_description</depend>\n"})}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"Use `get_package_share_directory('robot_description')` in launch file"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,i.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(e.li,{className:"task-list-item",children:[(0,i.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Both packages build"]}),"\n",(0,i.jsxs)(e.li,{className:"task-list-item",children:[(0,i.jsx)(e.input,{type:"checkbox",disabled:!0})," ","`robot_control` can access URDF from `robot_description`"]}),"\n",(0,i.jsxs)(e.li,{className:"task-list-item",children:[(0,i.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Launch file works"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Estimated Time"}),": 90 minutes"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html",children:"ROS 2 Package Creation Tutorial"})," - Official guide"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://docs.ros.org/en/humble/Tutorials/Intermediate/Launch/Launch-Main.html",children:"Launch File Documentation"})," - Complete launch system reference"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://colcon.readthedocs.io/",children:"colcon Documentation"})," - Build system details"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://docs.ros.org/en/humble/How-To-Guides/Ament-CMake-Documentation.html",children:"ament_cmake vs. ament_python"})," - When to use C++ vs. Python"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Previous"}),": [\u2190 Chapter 1.3: URDF for Humanoid Robots](chapter-1 to 3.md) | ",(0,i.jsx)(e.strong,{children:"Next"}),": [Chapter 1.5: Parameter Management & Best Practices \u2192](chapter-1 to 5.md)"]})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>t,x:()=>l});var o=s(6540);const i={},r=o.createContext(i);function t(n){const e=o.useContext(r);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:t(n.components),o.createElement(r.Provider,{value:e},n.children)}}}]);