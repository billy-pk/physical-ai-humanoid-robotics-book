"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[441],{5197:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"module-1/chapter-1-5","title":"1.5 Parameter Management & Best Practices","description":"Production robotics systems require runtime configurability, robust communication policies, and predictable lifecycle management. This chapter covers parameters, Quality of Service (QoS) profiles, lifecycle nodes, and best practices for building reliable ROS 2 systems.","source":"@site/docs/module-1/chapter-1-5.md","sourceDirName":"module-1","slug":"/module-1/chapter-1-5","permalink":"/physical-ai-humanoid-robotics-book/docs/module-1/chapter-1-5","draft":false,"unlisted":false,"editUrl":"https://github.com/billy-pk/physical-ai-humanoid-robotics-book/tree/main/frontend/docs/module-1/chapter-1-5.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"1.5 Parameter Management & Best Practices"},"sidebar":"defaultSidebar","previous":{"title":"1.4 Package Development & Launch Files","permalink":"/physical-ai-humanoid-robotics-book/docs/module-1/chapter-1-4"},"next":{"title":"Module 2 Introduction","permalink":"/physical-ai-humanoid-robotics-book/docs/module-2/intro"}}');var i=r(4848),l=r(8453);const t={sidebar_position:6,title:"1.5 Parameter Management & Best Practices"},a="Chapter 1.5: Parameter Management & Best Practices",o={},c=[{value:"Learning Outcomes",id:"learning-outcomes",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Part 1: ROS 2 Parameters",id:"part-1-ros-2-parameters",level:2},{value:"What are Parameters?",id:"what-are-parameters",level:3},{value:"Parameter Types",id:"parameter-types",level:3},{value:"Part 2: Hands-On Tutorial",id:"part-2-hands-on-tutorial",level:2},{value:"Project 1: Node with Parameters",id:"project-1-node-with-parameters",level:3},{value:"Project 2: Parameter File (YAML)",id:"project-2-parameter-file-yaml",level:3},{value:"Project 3: Parameter Callbacks",id:"project-3-parameter-callbacks",level:3},{value:"Part 3: Quality of Service (QoS)",id:"part-3-quality-of-service-qos",level:2},{value:"What is QoS?",id:"what-is-qos",level:3},{value:"QoS Settings",id:"qos-settings",level:3},{value:"Using QoS in Code",id:"using-qos-in-code",level:3},{value:"Part 4: Lifecycle Nodes (Optional Advanced)",id:"part-4-lifecycle-nodes-optional-advanced",level:2},{value:"What are Lifecycle Nodes?",id:"what-are-lifecycle-nodes",level:3},{value:"Part 5: ROS 2 Best Practices",id:"part-5-ros-2-best-practices",level:2},{value:"1. Node Design",id:"1-node-design",level:3},{value:"2. Naming Conventions",id:"2-naming-conventions",level:3},{value:"3. Error Handling",id:"3-error-handling",level:3},{value:"4. Logging Levels",id:"4-logging-levels",level:3},{value:"5. Performance Tips",id:"5-performance-tips",level:3},{value:"6. Testing",id:"6-testing",level:3},{value:"Integration with Capstone",id:"integration-with-capstone",level:2},{value:"Summary",id:"summary",level:2},{value:"Exercises",id:"exercises",level:2},{value:"Exercise 1: Configurable Publisher (Required)",id:"exercise-1-configurable-publisher-required",level:3},{value:"Exercise 2: QoS Experiments (Required)",id:"exercise-2-qos-experiments-required",level:3},{value:"Exercise 3: Complete Module 1 Project (Capstone)",id:"exercise-3-complete-module-1-project-capstone",level:3},{value:"Additional Resources",id:"additional-resources",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"chapter-15-parameter-management--best-practices",children:"Chapter 1.5: Parameter Management & Best Practices"})}),"\n",(0,i.jsx)(n.p,{children:"Production robotics systems require runtime configurability, robust communication policies, and predictable lifecycle management. This chapter covers parameters, Quality of Service (QoS) profiles, lifecycle nodes, and best practices for building reliable ROS 2 systems."}),"\n",(0,i.jsx)(n.h2,{id:"learning-outcomes",children:"Learning Outcomes"}),"\n",(0,i.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configure"})," nodes with YAML parameter files for runtime customization"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Implement"})," parameter callbacks to respond to configuration changes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Select"})," appropriate QoS profiles for different communication patterns"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Understand"})," lifecycle nodes for safety-critical humanoid systems"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Apply"})," ROS 2 best practices for maintainable, scalable robot software"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Completed Chapters 1.1 to 1.4"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Understanding of callbacks"})," (from Chapter 1.2)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Experience with YAML"})," syntax (basic key-value pairs)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"part-1-ros-2-parameters",children:"Part 1: ROS 2 Parameters"}),"\n",(0,i.jsx)(n.h3,{id:"what-are-parameters",children:"What are Parameters?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"})," are configuration values that nodes can read and modify at runtime without recompiling code."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example use cases"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Camera node"}),": Resolution (640\xd7480 vs. 1920\xd71080), frame rate (30 Hz vs. 60 Hz)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Motor controller"}),": PID gains (Kp, Ki, Kd)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Object detector"}),": Confidence threshold (0.5 vs. 0.8)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Why parameters over hardcoded values?"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reusability"}),": Same node works for different robots by changing config"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tuning"}),": Adjust PID gains without recompiling"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Multi-robot"}),": Run same package with different configs on different robots"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"parameter-types",children:"Parameter Types"}),"\n",(0,i.jsx)(n.p,{children:"ROS 2 supports these parameter types:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"`bool`: `True` / `False`"}),"\n",(0,i.jsx)(n.li,{children:"`int`: `42`, `-10`"}),"\n",(0,i.jsx)(n.li,{children:"`double`: `3.14159`, `0.5`"}),"\n",(0,i.jsx)(n.li,{children:'`string`: `"left_camera"`, `"/dev/ttyUSB0"`'}),"\n",(0,i.jsx)(n.li,{children:"`byte_array`, `bool_array`, `int_array`, `double_array`, `string_array`"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"part-2-hands-on-tutorial",children:"Part 2: Hands-On Tutorial"}),"\n",(0,i.jsx)(n.h3,{id:"project-1-node-with-parameters",children:"Project 1: Node with Parameters"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Goal"}),": Create a motor controller node with configurable PID gains."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"File"}),": `motor_controller.py`"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\"\"\"\nMotor Controller with Parameters\nROS 2 Humble | Python 3.10+\n\"\"\"\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Float64\n\nclass MotorController(Node):\n    \"\"\"\n    Motor controller with PID parameters.\n    Parameters:\n    - kp (double): Proportional gain\n    - ki (double): Integral gain\n    - kd (double): Derivative gain\n    - target_position (double): Desired motor position\n    \"\"\"\n    def __init__(self):\n        super().__init__('motor_controller')\n        \n        # Declare parameters with default values\n        self.declare_parameter('kp', 1.0)\n        self.declare_parameter('ki', 0.1)\n        self.declare_parameter('kd', 0.05)\n        self.declare_parameter('target_position', 0.0)\n        self.declare_parameter('control_rate', 50.0)  # Hz\n        \n        # Read parameter values\n        self.kp = self.get_parameter('kp').get_parameter_value().double_value\n        self.ki = self.get_parameter('ki').get_parameter_value().double_value\n        self.kd = self.get_parameter('kd').get_parameter_value().double_value\n        self.target = self.get_parameter('target_position').get_parameter_value().double_value\n        rate = self.get_parameter('control_rate').get_parameter_value().double_value\n        \n        # Publisher\n        self.pub = self.create_publisher(Float64, '/motor/command', 10)\n        \n        # Timer based on control_rate parameter\n        self.timer = self.create_timer(1.0 / rate, self.control_loop)\n        \n        # PID state\n        self.integral = 0.0\n        self.prev_error = 0.0\n        self.current_position = 0.0  # Simulated\n        \n        self.get_logger().info(\n            f'Motor Controller started: Kp={self.kp}, Ki={self.ki}, Kd={self.kd}, '\n            f'Target={self.target}, Rate={rate} Hz'\n        )\n    \n    def control_loop(self):\n        \"\"\"PID control loop.\"\"\"\n        # Calculate error\n        error = self.target - self.current_position\n        \n        # PID terms\n        P = self.kp * error\n        self.integral += error * (1.0 / 50.0)  # dt\n        I = self.ki * self.integral\n        derivative = (error - self.prev_error) * 50.0\n        D = self.kd * derivative\n        \n        # Control output\n        control = P + I + D\n        \n        # Simulate motor response\n        self.current_position += control * 0.01\n        \n        # Publish command\n        msg = Float64()\n        msg.data = control\n        self.pub.publish(msg)\n        \n        self.prev_error = error\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = MotorController()\n    \n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    \n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Explanation"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Lines 22 to 26"}),": Declare parameters with defaults"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Lines 28 to 32"}),": Read parameter values"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Line 38"}),": Timer rate calculated from parameter"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Run with default parameters"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run my_package motor_controller\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Run with custom parameters"})," (command line):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run my_package motor_controller --ros-args \\\n  -p kp:=2.5 \\\n  -p ki:=0.5 \\\n  -p kd:=0.1 \\\n  -p target_position:=1.57 \\\n  -p control_rate:=100.0\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Get parameter value"})," (while node is running):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 param get /motor_controller kp\n# Output: Double value is: 1.0\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Set parameter at runtime"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 param set /motor_controller kp 3.0\n# Output: Set parameter successful\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"List all parameters"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 param list /motor_controller\n# Output:\n# kd\n# ki\n# kp\n# target_position\n# control_rate\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"project-2-parameter-file-yaml",children:"Project 2: Parameter File (YAML)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Goal"}),": Load parameters from a YAML file."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"File"}),": `config/motor_params.yaml`"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"motor_controller:\n  ros__parameters:\n    kp: 2.5\n    ki: 0.3\n    kd: 0.08\n    target_position: 1.57  # 90 degrees\n    control_rate: 100.0\n    \n    # Additional parameters\n    max_integral: 10.0\n    output_limit: 5.0\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Structure"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Top level: Node name (`motor_controller`)"}),"\n",(0,i.jsx)(n.li,{children:"`ros__parameters`: Required key"}),"\n",(0,i.jsx)(n.li,{children:"Parameters as key-value pairs"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Run with parameter file"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run my_package motor_controller --ros-args \\\n  --params-file config/motor_params.yaml\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Launch file with parameters"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import os\nfrom ament_index_python.packages import get_package_share_directory\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    pkg_dir = get_package_share_directory('my_package')\n    param_file = os.path.join(pkg_dir, 'config', 'motor_params.yaml')\n    \n    return LaunchDescription([\n        Node(\n            package='my_package',\n            executable='motor_controller',\n            name='motor_controller',\n            output='screen',\n            parameters=[param_file]  # Load YAML file\n        ),\n    ])\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"project-3-parameter-callbacks",children:"Project 3: Parameter Callbacks"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Goal"}),": Respond to parameter changes at runtime."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from rcl_interfaces.msg import ParameterDescriptor, SetParametersResult\n\nclass MotorController(Node):\n    def __init__(self):\n        super().__init__('motor_controller')\n        \n        # Declare parameters with descriptors\n        kp_descriptor = ParameterDescriptor(\n            description='Proportional gain for PID controller',\n            read_only=False,  # Can be changed at runtime\n            dynamic_typing=False\n        )\n        self.declare_parameter('kp', 1.0, kp_descriptor)\n        \n        # Add parameter callback\n        self.add_on_set_parameters_callback(self.parameter_callback)\n        \n        self.get_logger().info('Motor controller with parameter callback ready')\n    \n    def parameter_callback(self, params):\n        \"\"\"\n        Called when parameters are modified at runtime.\n        \n        Args:\n            params: List of parameters that changed\n        \n        Returns:\n            SetParametersResult: Success or failure\n        \"\"\"\n        result = SetParametersResult(successful=True)\n        \n        for param in params:\n            if param.name == 'kp':\n                new_kp = param.value\n                \n                # Validate parameter\n                if new_kp < 0.0:\n                    self.get_logger().error(f'Invalid Kp: {new_kp}. Must be >= 0')\n                    result.successful = False\n                    result.reason = 'Kp must be non-negative'\n                else:\n                    self.kp = new_kp\n                    self.get_logger().info(f'Updated Kp to {self.kp}')\n            \n            elif param.name == 'ki':\n                new_ki = param.value\n                if new_ki < 0.0:\n                    result.successful = False\n                    result.reason = 'Ki must be non-negative'\n                else:\n                    self.ki = new_ki\n                    self.get_logger().info(f'Updated Ki to {self.ki}')\n        \n        return result\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Test callback"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Run node\nros2 run my_package motor_controller\n\n# Terminal 2: Change parameter\nros2 param set /motor_controller kp 5.0\n# Node logs: [INFO] Updated Kp to 5.0\n\n# Try invalid value\nros2 param set /motor_controller kp -1.0\n# Node logs: [ERROR] Invalid Kp: -1.0. Must be >= 0\n# Terminal output: Setting parameter failed: Kp must be non-negative\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"part-3-quality-of-service-qos",children:"Part 3: Quality of Service (QoS)"}),"\n",(0,i.jsx)(n.h3,{id:"what-is-qos",children:"What is QoS?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Quality of Service"})," profiles define communication reliability, durability, and history settings."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Common QoS profiles"}),":"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Profile"}),(0,i.jsx)(n.th,{children:"Reliability"}),(0,i.jsx)(n.th,{children:"Durability"}),(0,i.jsx)(n.th,{children:"History"}),(0,i.jsx)(n.th,{children:"Use Case"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Sensor Data"})}),(0,i.jsx)(n.td,{children:"Best Effort"}),(0,i.jsx)(n.td,{children:"Volatile"}),(0,i.jsx)(n.td,{children:"Keep Last 1"}),(0,i.jsx)(n.td,{children:"Camera images (OK to drop frames)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Default"})}),(0,i.jsx)(n.td,{children:"Reliable"}),(0,i.jsx)(n.td,{children:"Volatile"}),(0,i.jsx)(n.td,{children:"Keep Last 10"}),(0,i.jsx)(n.td,{children:"General commands"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Services"})}),(0,i.jsx)(n.td,{children:"Reliable"}),(0,i.jsx)(n.td,{children:"Volatile"}),(0,i.jsx)(n.td,{children:"Keep Last 10"}),(0,i.jsx)(n.td,{children:"Request/reply"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"System Default"})}),(0,i.jsx)(n.td,{children:"Reliable"}),(0,i.jsx)(n.td,{children:"Transient Local"}),(0,i.jsx)(n.td,{children:"Keep Last 10"}),(0,i.jsx)(n.td,{children:"Configuration topics"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"qos-settings",children:"QoS Settings"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Reliability"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reliable"}),": Guarantees delivery (retransmits lost packets)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Best Effort"}),": Allows dropped messages (lower latency)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Durability"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Volatile"}),": Late joiners miss old messages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Transient Local"}),": Late joiners receive last N messages"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"History"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Keep Last N"}),": Store last N messages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Keep All"}),": Store all messages (until memory limit)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"using-qos-in-code",children:"Using QoS in Code"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, ReliabilityPolicy, DurabilityPolicy, HistoryPolicy\n\n# Custom QoS for camera images (best effort, low latency)\nqos_profile = QoSProfile(\n    reliability=ReliabilityPolicy.BEST_EFFORT,\n    durability=DurabilityPolicy.VOLATILE,\n    history=HistoryPolicy.KEEP_LAST,\n    depth=1  # Keep only latest frame\n)\n\n# Create publisher with custom QoS\nself.publisher_ = self.create_publisher(\n    Image,\n    '/camera/image_raw',\n    qos_profile\n)\n\n# Create subscriber with matching QoS\nself.subscription = self.create_subscription(\n    Image,\n    '/camera/image_raw',\n    self.image_callback,\n    qos_profile\n)\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Predefined QoS profiles"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from rclpy.qos import qos_profile_sensor_data, qos_profile_services_default\n\n# Use sensor data profile (best effort)\nself.publisher_ = self.create_publisher(Image, '/camera', qos_profile_sensor_data)\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"QoS Mismatch"}),":\nIf publisher and subscriber have incompatible QoS, communication fails silently."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Debug QoS issues"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check QoS settings of a topic\nros2 topic info -v /camera/image_raw\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"part-4-lifecycle-nodes-optional-advanced",children:"Part 4: Lifecycle Nodes (Optional Advanced)"}),"\n",(0,i.jsx)(n.h3,{id:"what-are-lifecycle-nodes",children:"What are Lifecycle Nodes?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Lifecycle nodes"})," provide deterministic state management for safety-critical systems."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"States"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Unconfigured"}),": Node created but not ready"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Inactive"}),": Configured but not processing data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Active"}),": Fully operational"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Finalized"}),": Shutting down"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use case"}),": Humanoid robot startup sequence"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Initialize hardware (Unconfigured \u2192 Inactive)"}),"\n",(0,i.jsx)(n.li,{children:"Run self-tests and calibration (Inactive)"}),"\n",(0,i.jsx)(n.li,{children:"Start control loops (Inactive \u2192 Active)"}),"\n",(0,i.jsx)(n.li,{children:"Emergency stop (Active \u2192 Inactive)"}),"\n",(0,i.jsx)(n.li,{children:"Shutdown (Inactive \u2192 Finalized)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from rclpy.lifecycle import LifecycleNode, TransitionCallbackReturn\n\nclass SafetyController(LifecycleNode):\n    def __init__(self):\n        super().__init__(\'safety_controller\')\n    \n    def on_configure(self, state):\n        """Called when transitioning to Inactive."""\n        self.get_logger().info(\'Configuring hardware...\')\n        # Initialize sensors, motors\n        return TransitionCallbackReturn.SUCCESS\n    \n    def on_activate(self, state):\n        """Called when transitioning to Active."""\n        self.get_logger().info(\'Starting control loops...\')\n        # Start timers, enable motors\n        return TransitionCallbackReturn.SUCCESS\n    \n    def on_deactivate(self, state):\n        """Called when transitioning to Inactive (emergency stop)."""\n        self.get_logger().warn(\'Emergency stop activated!\')\n        # Stop motors, disable control\n        return TransitionCallbackReturn.SUCCESS\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Control lifecycle"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Configure node\nros2 lifecycle set /safety_controller configure\n\n# Activate node\nros2 lifecycle set /safety_controller activate\n\n# Emergency stop (deactivate)\nros2 lifecycle set /safety_controller deactivate\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"part-5-ros-2-best-practices",children:"Part 5: ROS 2 Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"1-node-design",children:"1. Node Design"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Single Responsibility Principle"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u274c Bad: One node handles camera, object detection, AND navigation"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Good: Separate nodes for camera driver, detector, planner"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Keep nodes small and focused"})," (~200 to 500 lines per node)."]}),"\n",(0,i.jsx)(n.h3,{id:"2-naming-conventions",children:"2. Naming Conventions"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Nodes"}),": `snake_case`"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"/camera_driver\n/object_detector\n/motion_planner\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Topics"}),": `/namespace/description`"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"/camera/image_raw\n/robot/joint_states\n/nav/goal\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),": `snake_case`"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"max_velocity\npid_gains\ncamera_resolution\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-error-handling",children:"3. Error Handling"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Always validate inputs"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"def joint_command_callback(self, msg):\n    if len(msg.position) != self.num_joints:\n        self.get_logger().error(\n            f'Expected {self.num_joints} joints, got {len(msg.position)}'\n        )\n        return\n    \n    # Process command\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use try-except for external calls"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"try:\n    response = self.client.call_async(request)\nexcept Exception as e:\n    self.get_logger().error(f'Service call failed: {e}')\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-logging-levels",children:"4. Logging Levels"}),"\n",(0,i.jsx)(n.p,{children:"Use appropriate log levels:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"self.get_logger().debug('Detailed diagnostic: joint angle = 1.234')  # Verbose\nself.get_logger().info('Node started successfully')                   # Normal\nself.get_logger().warn('Battery low: 15% remaining')                  # Warning\nself.get_logger().error('Sensor read failed: timeout')                # Error\nself.get_logger().fatal('Critical hardware failure, shutting down')   # Fatal\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Set log level"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run my_pkg my_node --ros-args --log-level DEBUG\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-performance-tips",children:"5. Performance Tips"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use timers, not `while True` loops"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# \u274c Bad: Blocks executor\ndef __init__(self):\n    while True:\n        self.publish_data()\n        time.sleep(0.1)\n\n# \u2705 Good: Uses ROS 2 timer\ndef __init__(self):\n    self.create_timer(0.1, self.publish_data)\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Avoid blocking operations in callbacks"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# \u274c Bad: Blocks other callbacks\ndef callback(self, msg):\n    result = self.expensive_computation(msg)  # Takes 5 seconds\n\n# \u2705 Good: Offload to thread\ndef callback(self, msg):\n    threading.Thread(target=self.expensive_computation, args=(msg,)).start()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"6-testing",children:"6. Testing"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Write unit tests"})," for nodes:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import unittest\nfrom my_package.motor_controller import MotorController\n\nclass TestMotorController(unittest.TestCase):\n    def test_pid_calculation(self):\n        node = MotorController()\n        # Test PID logic\n        self.assertAlmostEqual(node.kp, 1.0)\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Run tests"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"colcon test --packages-select my_package\ncolcon test-result --verbose\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"integration-with-capstone",children:"Integration with Capstone"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"How this chapter contributes"})," to the Week 13 autonomous humanoid:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),": Configure LLM model, Nav2 settings, object detection threshold via YAML"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'llm_planner:\n  ros__parameters:\n    model: "gpt-4"\n    temperature: 0.7\n    max_tokens: 500\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"QoS"}),": Use sensor_data QoS for camera (30 Hz), reliable QoS for navigation goals"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Lifecycle"}),": Safety controller ensures humanoid shuts down gracefully on emergency stop"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Best practices"}),": Modular nodes (voice, planning, navigation, vision) communicate via well-defined interfaces"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:"You learned:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 Configured nodes with ",(0,i.jsx)(n.strong,{children:"YAML parameter files"})]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 Implemented ",(0,i.jsx)(n.strong,{children:"parameter callbacks"})," for runtime changes"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 Selected ",(0,i.jsx)(n.strong,{children:"QoS profiles"})," for different communication patterns"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 Understood ",(0,i.jsx)(n.strong,{children:"lifecycle nodes"})," for safety-critical systems"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 Applied ",(0,i.jsx)(n.strong,{children:"ROS 2 best practices"})," for maintainable code"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Next steps"}),": Module 1 complete! In Module 2, you'll simulate humanoid robots in Gazebo with physics and sensors."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,i.jsx)(n.h3,{id:"exercise-1-configurable-publisher-required",children:"Exercise 1: Configurable Publisher (Required)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Objective"}),": Create a publisher with configurable topic name and publish rate."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Tasks"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Create node with parameters:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"`topic_name` (string, default: `/data`)"}),"\n",(0,i.jsx)(n.li,{children:"`publish_rate` (double, default: 10.0 Hz)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Publish incrementing counter to configured topic"}),"\n",(0,i.jsx)(n.li,{children:"Create YAML file with custom settings"}),"\n",(0,i.jsx)(n.li,{children:"Test with parameter file"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Parameters loaded from YAML"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","`ros2 param set` changes publish rate"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Node publishes to custom topic name"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Estimated Time"}),": 45 minutes"]}),"\n",(0,i.jsx)(n.h3,{id:"exercise-2-qos-experiments-required",children:"Exercise 2: QoS Experiments (Required)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Objective"}),": Understand QoS compatibility."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Tasks"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Create publisher with `BEST_EFFORT` reliability"}),"\n",(0,i.jsx)(n.li,{children:"Create subscriber with `RELIABLE` reliability"}),"\n",(0,i.jsx)(n.li,{children:"Run both\u2014observe no communication"}),"\n",(0,i.jsx)(n.li,{children:"Fix by matching QoS profiles"}),"\n",(0,i.jsx)(n.li,{children:"Document findings"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Demonstrated QoS mismatch (no communication)"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Fixed with matching profiles"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Explained why mismatch failed"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Estimated Time"}),": 30 minutes"]}),"\n",(0,i.jsx)(n.h3,{id:"exercise-3-complete-module-1-project-capstone",children:"Exercise 3: Complete Module 1 Project (Capstone)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Objective"}),": Build the Module 1 assessment project."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Requirements"})," (from intro.md):"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"ROS 2 package controlling 6+ humanoid joints"}),"\n",(0,i.jsx)(n.li,{children:"Publish joint commands, subscribe to joint states"}),"\n",(0,i.jsx)(n.li,{children:'Service to execute pre-defined poses ("wave", "sit", "stand")'}),"\n",(0,i.jsx)(n.li,{children:"Launch file starting all nodes"}),"\n",(0,i.jsx)(n.li,{children:"RViz2 visualization"}),"\n",(0,i.jsx)(n.li,{children:"Demo video (2 to 3 minutes)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Hints"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use URDF from Chapter 1.3"}),"\n",(0,i.jsx)(n.li,{children:"Publisher/subscriber from Chapter 1.2"}),"\n",(0,i.jsx)(n.li,{children:"Service from Chapter 1.2"}),"\n",(0,i.jsx)(n.li,{children:"Launch file from Chapter 1.4"}),"\n",(0,i.jsx)(n.li,{children:"Parameters from this chapter"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","All requirements met (see intro.md grading rubric)"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","GitHub repository with code"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Demo video uploaded"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Estimated Time"}),": 4 to 6 hours (module project)"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Using-Parameters-In-A-Class-Python.html",children:"ROS 2 Parameters Tutorial"})," - Official guide"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html",children:"QoS Policies"})," - Complete QoS reference"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://design.ros2.org/articles/node_lifecycle.html",children:"Lifecycle Nodes"})," - Design document"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Contributing/Developer-Guide.html",children:"ROS 2 Best Practices"})," - Coding standards"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Previous"}),": [\u2190 Chapter 1.4: Package Development & Launch Files](chapter-1 to 4.md) | ",(0,i.jsx)(n.strong,{children:"Next"}),": ",(0,i.jsx)(n.a,{href:"/physical-ai-humanoid-robotics-book/docs/module-2/intro",children:"Module 2: The Digital Twin (Gazebo & Unity) \u2192"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Congratulations!"})," You've completed Module 1. You now understand ROS 2's architecture, can write Python nodes, model robots with URDF, package code, and manage parameters. Module 2 will teach you to simulate humanoids in Gazebo and Unity!"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>a});var s=r(6540);const i={},l=s.createContext(i);function t(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);