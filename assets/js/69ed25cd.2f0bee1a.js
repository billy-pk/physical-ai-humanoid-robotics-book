"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[2441],{6246:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"module-1/chapter-1-1","title":"1.1 ROS 2 Architecture & Core Concepts","description":"ROS 2 is the middleware layer that enables humanoid robots to coordinate hundreds of sensors, motors, and algorithms in real-time. Understanding its architecture is fundamental to building autonomous Physical AI systems.","source":"@site/docs/module-1/chapter-1-1.md","sourceDirName":"module-1","slug":"/module-1/chapter-1-1","permalink":"/physical-ai-humanoid-robotics-book/docs/module-1/chapter-1-1","draft":false,"unlisted":false,"editUrl":"https://github.com/billy-pk/physical-ai-humanoid-robotics-book/tree/main/frontend/docs/module-1/chapter-1-1.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"1.1 ROS 2 Architecture & Core Concepts"},"sidebar":"defaultSidebar","previous":{"title":"Module 1 Introduction","permalink":"/physical-ai-humanoid-robotics-book/docs/module-1/intro"},"next":{"title":"1.2 Python Integration with rclpy","permalink":"/physical-ai-humanoid-robotics-book/docs/module-1/chapter-1-2"}}');var r=n(4848),l=n(8453);const t={sidebar_position:2,title:"1.1 ROS 2 Architecture & Core Concepts"},o="Chapter 1.1: ROS 2 Architecture & Core Concepts",c={},d=[{value:"Learning Outcomes",id:"learning-outcomes",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Part 1: ROS 2 Architecture Fundamentals",id:"part-1-ros-2-architecture-fundamentals",level:2},{value:"The ROS 2 Computational Graph",id:"the-ros-2-computational-graph",level:3},{value:"Key Concepts",id:"key-concepts",level:3},{value:"1. Nodes",id:"1-nodes",level:4},{value:"2. Topics (Publish/Subscribe)",id:"2-topics-publishsubscribe",level:4},{value:"3. Services (Request/Reply)",id:"3-services-requestreply",level:4},{value:"4. Actions (Goal-Based)",id:"4-actions-goal-based",level:4},{value:"DDS Middleware Layer",id:"dds-middleware-layer",level:3},{value:"Part 2: Hands-On Tutorial",id:"part-2-hands-on-tutorial",level:2},{value:"Project: Install ROS 2 and Communicate Between Nodes",id:"project-install-ros-2-and-communicate-between-nodes",level:3},{value:"Step 1: Install ROS 2 Humble",id:"step-1-install-ros-2-humble",level:3},{value:"Step 2: Configure Environment",id:"step-2-configure-environment",level:3},{value:"Step 3: Test with Example Nodes",id:"step-3-test-with-example-nodes",level:3},{value:"Step 4: Introspection Tools",id:"step-4-introspection-tools",level:3},{value:"Step 5: Visualize with RQt Graph",id:"step-5-visualize-with-rqt-graph",level:3},{value:"Step 6: Debugging Common Issues",id:"step-6-debugging-common-issues",level:3},{value:"Issue 1: &quot;ros2: command not found&quot;",id:"issue-1-ros2-command-not-found",level:4},{value:"Issue 2: &quot;Package &#39;demo_nodes_cpp&#39; not found&quot;",id:"issue-2-package-demo_nodes_cpp-not-found",level:4},{value:"Issue 3: Nodes running but not communicating",id:"issue-3-nodes-running-but-not-communicating",level:4},{value:"Issue 4: &quot;Unable to initialize transports&quot; error",id:"issue-4-unable-to-initialize-transports-error",level:4},{value:"Part 3: Advanced Topics (Optional)",id:"part-3-advanced-topics-optional",level:2},{value:"Quality of Service (QoS) Profiles",id:"quality-of-service-qos-profiles",level:3},{value:"ROS 2 vs. ROS 1 Architecture",id:"ros-2-vs-ros-1-architecture",level:3},{value:"Integration with Capstone",id:"integration-with-capstone",level:2},{value:"Summary",id:"summary",level:2},{value:"Exercises",id:"exercises",level:2},{value:"Exercise 1: Multi-Publisher Experiment (Required)",id:"exercise-1-multi-publisher-experiment-required",level:3},{value:"Exercise 2: Custom Topic Publishing (Required)",id:"exercise-2-custom-topic-publishing-required",level:3},{value:"Exercise 3: Investigate Message Types (Challenge)",id:"exercise-3-investigate-message-types-challenge",level:3},{value:"Additional Resources",id:"additional-resources",level:2}];function a(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"chapter-11-ros-2-architecture--core-concepts",children:"Chapter 1.1: ROS 2 Architecture & Core Concepts"})}),"\n",(0,r.jsx)(s.p,{children:"ROS 2 is the middleware layer that enables humanoid robots to coordinate hundreds of sensors, motors, and algorithms in real-time. Understanding its architecture is fundamental to building autonomous Physical AI systems."}),"\n",(0,r.jsx)(s.h2,{id:"learning-outcomes",children:"Learning Outcomes"}),"\n",(0,r.jsx)(s.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Understand"})," the ROS 2 computational graph (nodes, topics, services, actions)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Install"})," ROS 2 Humble on Ubuntu 22.04 and configure the environment"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Implement"})," basic publisher and subscriber nodes using command-line tools"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Debug"})," communication between nodes using ROS 2 introspection tools"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Explain"})," how DDS middleware enables distributed robot systems"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Ubuntu 22.04 LTS"})," installed (native or VM with 4GB+ RAM)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Basic Linux terminal skills"}),": cd, ls, sudo, nano/vim"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Python 3.10+"})," (comes with Ubuntu 22.04)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Git"})," for version control"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"part-1-ros-2-architecture-fundamentals",children:"Part 1: ROS 2 Architecture Fundamentals"}),"\n",(0,r.jsx)(s.h3,{id:"the-ros-2-computational-graph",children:"The ROS 2 Computational Graph"}),"\n",(0,r.jsxs)(s.p,{children:["ROS 2 applications consist of ",(0,r.jsx)(s.strong,{children:"nodes"})," communicating through three primary patterns:"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Communication Pattern"}),(0,r.jsx)(s.th,{children:"Use Case"}),(0,r.jsx)(s.th,{children:"Example"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.strong,{children:"Topics"})," (Pub/Sub)"]}),(0,r.jsx)(s.td,{children:"Continuous sensor data streaming"}),(0,r.jsx)(s.td,{children:"Camera publishes images at 30 Hz"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.strong,{children:"Services"})," (Request/Reply)"]}),(0,r.jsx)(s.td,{children:"One-time computations"}),(0,r.jsx)(s.td,{children:'"What\'s the current battery level?"'})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.strong,{children:"Actions"})," (Goal-Based)"]}),(0,r.jsx)(s.td,{children:"Long-running tasks with feedback"}),(0,r.jsx)(s.td,{children:'"Navigate to (x, y) and report progress"'})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,r.jsx)(s.h4,{id:"1-nodes",children:"1. Nodes"}),"\n",(0,r.jsxs)(s.p,{children:["A ",(0,r.jsx)(s.strong,{children:"node"})," is a single executable process performing a specific task."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Example nodes in a humanoid robot"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"`/camera_driver`: Publishes RGB images"}),"\n",(0,r.jsx)(s.li,{children:"`/object_detector`: Subscribes to images, publishes detected objects"}),"\n",(0,r.jsx)(s.li,{children:"`/motion_planner`: Plans joint trajectories to grasp objects"}),"\n",(0,r.jsx)(s.li,{children:"`/joint_controller`: Commands motors based on planned trajectories"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Why multiple nodes?"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Modularity"}),": Replace object_detector with a better model without touching other code"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fault isolation"}),": If camera_driver crashes, planner keeps running"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Distributed processing"}),": Run camera_driver on Jetson, planner on workstation"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"2-topics-publishsubscribe",children:"2. Topics (Publish/Subscribe)"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Topics"})," are named buses where nodes publish and subscribe to messages."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Key Properties"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Many-to-many"}),": Multiple publishers and subscribers per topic"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Asynchronous"}),": Publishers don't wait for subscribers"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Typed"}),": Each topic has a message type (e.g., `sensor_msgs/Image`)"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Example"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Topic: /camera/image_raw\nType: sensor_msgs/msg/Image\nPublishers: /camera_driver\nSubscribers: /object_detector, /face_recognizer, /slam_node\n"})}),"\n",(0,r.jsx)(s.h4,{id:"3-services-requestreply",children:"3. Services (Request/Reply)"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Services"})," provide synchronous request/reply interactions."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Example"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Service: /get_battery_level\nType: std_srvs/srv/Trigger\nServer: /battery_monitor\nClients: /mission_planner, /safety_monitor\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Use case"}),': Mission planner calls service before starting a task: "Do we have enough battery for this 5-minute navigation?"']}),"\n",(0,r.jsx)(s.h4,{id:"4-actions-goal-based",children:"4. Actions (Goal-Based)"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Actions"})," are for long-running tasks requiring feedback and cancellation."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Example"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Action: /navigate_to_pose\nType: nav2_msgs/action/NavigateToPose\nServer: /nav2_controller\nClient: /mission_planner\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Workflow"}),":"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:'Client sends goal: "Navigate to (x=5.0, y=3.2)"'}),"\n",(0,r.jsx)(s.li,{children:'Server sends feedback: "60% complete, ETA 12 seconds"'}),"\n",(0,r.jsx)(s.li,{children:"Client can cancel if needed"}),"\n",(0,r.jsx)(s.li,{children:'Server sends result: "Goal reached" or "Failed: obstacle"'}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"dds-middleware-layer",children:"DDS Middleware Layer"}),"\n",(0,r.jsxs)(s.p,{children:["ROS 2 uses ",(0,r.jsx)(s.strong,{children:"DDS (Data Distribution Service)"})," as its communication layer."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Benefits for humanoid robots"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"QoS (Quality of Service)"}),": Configure reliability/latency tradeoffs","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:'Camera images: "Best effort" (OK to drop frames for low latency)'}),"\n",(0,r.jsx)(s.li,{children:'Safety commands: "Reliable" (never drop emergency stop messages)'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Discovery"}),": Nodes automatically find each other on the network"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Security"}),": Encrypt communication (critical for commercial robots)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Multi-robot"}),": Multiple humanoids share data on the same network"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"part-2-hands-on-tutorial",children:"Part 2: Hands-On Tutorial"}),"\n",(0,r.jsx)(s.h3,{id:"project-install-ros-2-and-communicate-between-nodes",children:"Project: Install ROS 2 and Communicate Between Nodes"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Goal"}),": Install ROS 2 Humble, create publisher and subscriber nodes using CLI tools, and verify communication."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Tools"}),": Ubuntu 22.04, ROS 2 Humble"]}),"\n",(0,r.jsx)(s.h3,{id:"step-1-install-ros-2-humble",children:"Step 1: Install ROS 2 Humble"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'# Ensure UTF-8 locale\nlocale  # check if UTF-8\nsudo apt update && sudo apt install locales\nsudo locale-gen en_US en_US.UTF-8\nsudo update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8\nexport LANG=en_US.UTF-8\n\n# Add ROS 2 apt repository\nsudo apt install software-properties-common\nsudo add-apt-repository universe\n\nsudo apt update && sudo apt install curl -y\nsudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg\n\necho "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(. /etc/os-release && echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null\n\n# Install ROS 2 Humble Desktop (includes RViz2, demos, tutorials)\nsudo apt update\nsudo apt upgrade\nsudo apt install ros-humble-desktop\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Installation time"}),": ~10 to 15 minutes (downloads ~1GB)"]}),"\n",(0,r.jsx)(s.h3,{id:"step-2-configure-environment",children:"Step 2: Configure Environment"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Source ROS 2 setup file (add to ~/.bashrc to make permanent)\nsource /opt/ros/humble/setup.bash\n\n# Verify installation\nros2 --help\n\n# You should see:\n# usage: ros2 [-h] [--use-python-default-buffering] Call \\`ros2 <command> -h\\` for more detailed usage. ...\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Add to `~/.bashrc` for automatic sourcing"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'echo "source /opt/ros/humble/setup.bash" >> ~/.bashrc\nsource ~/.bashrc\n'})}),"\n",(0,r.jsx)(s.h3,{id:"step-3-test-with-example-nodes",children:"Step 3: Test with Example Nodes"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Terminal 1: Run a publisher (talker node)"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 run demo_nodes_cpp talker\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Expected Output"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"[INFO] [1698765432.123456789] [talker]: Publishing: 'Hello World: 1'\n[INFO] [1698765433.123456789] [talker]: Publishing: 'Hello World: 2'\n[INFO] [1698765434.123456789] [talker]: Publishing: 'Hello World: 3'\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Terminal 2: Run a subscriber (listener node)"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 run demo_nodes_py listener\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Expected Output"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"[INFO] [1698765434.234567890] [listener]: I heard: 'Hello World: 3'\n[INFO] [1698765435.234567890] [listener]: I heard: 'Hello World: 4'\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"What's happening?"})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"`talker` publishes messages to topic `/chatter` every 1 second"}),"\n",(0,r.jsx)(s.li,{children:"`listener` subscribes to `/chatter` and prints received messages"}),"\n",(0,r.jsx)(s.li,{children:"DDS middleware automatically discovers nodes and routes messages"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"step-4-introspection-tools",children:"Step 4: Introspection Tools"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"List all active nodes"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 node list\n"})}),"\n",(0,r.jsx)(s.p,{children:"Output:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"/talker\n/listener\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"List all topics"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic list\n"})}),"\n",(0,r.jsx)(s.p,{children:"Output:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"/chatter\n/parameter_events\n/rosout\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Get topic info"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic info /chatter\n"})}),"\n",(0,r.jsx)(s.p,{children:"Output:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Type: std_msgs/msg/String\nPublisher count: 1\nSubscription count: 1\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Echo topic messages"})," (see live data):"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic echo /chatter\n"})}),"\n",(0,r.jsx)(s.p,{children:"Output:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"data: 'Hello World: 10'\n---\ndata: 'Hello World: 11'\n---\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Check message type definition"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 interface show std_msgs/msg/String\n"})}),"\n",(0,r.jsx)(s.p,{children:"Output:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"# This was originally provided as an example message.\n# It is deprecated as of Foxy\n# It is recommended to create your own semantically meaningful message.\n# However if you would like to continue using this please use the equivalent in example_msgs.\n\nstring data\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Publish from command line"})," (no code needed):"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic pub /chatter std_msgs/msg/String \"data: 'Hello from terminal'\"\n"})}),"\n",(0,r.jsx)(s.h3,{id:"step-5-visualize-with-rqt-graph",children:"Step 5: Visualize with RQt Graph"}),"\n",(0,r.jsx)(s.p,{children:"RQt provides a graphical view of the ROS 2 computational graph."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Install rqt (if not already installed)\nsudo apt install ros-humble-rqt*\n\n# Run rqt_graph\nrqt_graph\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"What you'll see"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Nodes as ovals (`/talker`, `/listener`)"}),"\n",(0,r.jsx)(s.li,{children:"Topics as rectangles (`/chatter`)"}),"\n",(0,r.jsx)(s.li,{children:"Arrows showing publish/subscribe relationships"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"step-6-debugging-common-issues",children:"Step 6: Debugging Common Issues"}),"\n",(0,r.jsx)(s.h4,{id:"issue-1-ros2-command-not-found",children:'Issue 1: "ros2: command not found"'}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Cause"}),": ROS 2 setup file not sourced"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'source /opt/ros/humble/setup.bash\n# Or add to ~/.bashrc:\necho "source /opt/ros/humble/setup.bash" >> ~/.bashrc\n'})}),"\n",(0,r.jsx)(s.h4,{id:"issue-2-package-demo_nodes_cpp-not-found",children:"Issue 2: \"Package 'demo_nodes_cpp' not found\""}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Cause"}),": Desktop install missing or incomplete"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo apt install ros-humble-demo-nodes-cpp ros-humble-demo-nodes-py\n"})}),"\n",(0,r.jsx)(s.h4,{id:"issue-3-nodes-running-but-not-communicating",children:"Issue 3: Nodes running but not communicating"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Cause"}),": DDS discovery issues or different ROS_DOMAIN_ID"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Check domain ID (default is 0)\necho $ROS_DOMAIN_ID\n\n# If using multiple ROS 2 systems, set unique domain IDs\nexport ROS_DOMAIN_ID=42  # Use same ID for all nodes that should communicate\n"})}),"\n",(0,r.jsx)(s.h4,{id:"issue-4-unable-to-initialize-transports-error",children:'Issue 4: "Unable to initialize transports" error'}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Cause"}),": Firewall blocking DDS multicast"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Disable firewall (temporary, for development only)\nsudo ufw disable\n\n# Or add rule to allow ROS 2 traffic\nsudo ufw allow from 224.0.0.0/4\n"})}),"\n",(0,r.jsx)(s.h2,{id:"part-3-advanced-topics-optional",children:"Part 3: Advanced Topics (Optional)"}),"\n",(0,r.jsx)(s.h3,{id:"quality-of-service-qos-profiles",children:"Quality of Service (QoS) Profiles"}),"\n",(0,r.jsx)(s.p,{children:"ROS 2 allows fine-grained control over message delivery guarantees."}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Common QoS profiles"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Reliable"}),": Guaranteed delivery (for safety commands)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Best Effort"}),": Drop old messages (for sensor streams)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Transient Local"}),": Late joiners receive last message"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Volatile"}),": Late joiners get nothing"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Example use case"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:'Camera publishes at 30 Hz with "Best Effort" (low latency, OK to drop frames)'}),"\n",(0,r.jsx)(s.li,{children:'Emergency stop uses "Reliable" (never drop critical commands)'}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Set QoS via CLI"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'ros2 topic pub --qos-reliability reliable /emergency_stop std_msgs/msg/Bool "data: true"\n'})}),"\n",(0,r.jsx)(s.h3,{id:"ros-2-vs-ros-1-architecture",children:"ROS 2 vs. ROS 1 Architecture"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Aspect"}),(0,r.jsx)(s.th,{children:"ROS 1"}),(0,r.jsx)(s.th,{children:"ROS 2"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Master"})}),(0,r.jsx)(s.td,{children:"Required (single point of failure)"}),(0,r.jsx)(s.td,{children:"None (peer-to-peer discovery)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Middleware"})}),(0,r.jsx)(s.td,{children:"Custom (TCP/UDP)"}),(0,r.jsx)(s.td,{children:"DDS (industry standard)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Language Support"})}),(0,r.jsx)(s.td,{children:"C++, Python"}),(0,r.jsx)(s.td,{children:"C++, Python, Rust, Ada, more"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Real-time"})}),(0,r.jsx)(s.td,{children:"Not supported"}),(0,r.jsx)(s.td,{children:"Real-time capable with DDS-RT"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Security"})}),(0,r.jsx)(s.td,{children:"None"}),(0,r.jsx)(s.td,{children:"DDS encryption & authentication"})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"integration-with-capstone",children:"Integration with Capstone"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"How this chapter contributes"})," to the Week 13 autonomous humanoid:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Node architecture"}),": The capstone will have 10+ nodes:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"`/whisper_listener` (voice input)"}),"\n",(0,r.jsx)(s.li,{children:"`/llm_planner` (task decomposition)"}),"\n",(0,r.jsx)(s.li,{children:"`/nav2_controller` (navigation)"}),"\n",(0,r.jsx)(s.li,{children:"`/object_detector` (vision)"}),"\n",(0,r.jsx)(s.li,{children:"`/gripper_controller` (manipulation)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Topic communication"}),": Nodes exchange data asynchronously:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Voice \u2192 LLM \u2192 Navigation goals \u2192 Motor commands"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Service calls"}),': "Get current robot pose", "Check if object reachable"']}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Actions"}),": Long-running navigation and manipulation tasks with feedback"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Understanding topics, services, and actions now is essential for orchestrating complex multi-node systems."}),"\n",(0,r.jsx)(s.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(s.p,{children:"You learned:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u2705 ROS 2 uses ",(0,r.jsx)(s.strong,{children:"nodes"})," communicating via ",(0,r.jsx)(s.strong,{children:"topics"}),", ",(0,r.jsx)(s.strong,{children:"services"}),", and ",(0,r.jsx)(s.strong,{children:"actions"})]}),"\n",(0,r.jsxs)(s.li,{children:["\u2705 ",(0,r.jsx)(s.strong,{children:"DDS middleware"})," enables distributed, real-time robot systems"]}),"\n",(0,r.jsxs)(s.li,{children:["\u2705 Installed ",(0,r.jsx)(s.strong,{children:"ROS 2 Humble"})," on Ubuntu 22.04"]}),"\n",(0,r.jsx)(s.li,{children:"\u2705 Ran example nodes and verified communication with introspection tools"}),"\n",(0,r.jsx)(s.li,{children:"\u2705 Debugged common installation and communication issues"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Next steps"}),": In Chapter 1.2, you'll write custom publisher/subscriber nodes in Python using `rclpy`."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"exercises",children:"Exercises"}),"\n",(0,r.jsx)(s.h3,{id:"exercise-1-multi-publisher-experiment-required",children:"Exercise 1: Multi-Publisher Experiment (Required)"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Objective"}),": Understand many-to-many topic communication."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Tasks"}),":"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Open ",(0,r.jsx)(s.strong,{children:"three terminals"})]}),"\n",(0,r.jsx)(s.li,{children:"Terminal 1: Run `ros2 run demo_nodes_cpp talker`"}),"\n",(0,r.jsx)(s.li,{children:"Terminal 2: Run `ros2 run demo_nodes_py talker` (yes, same topic!)"}),"\n",(0,r.jsx)(s.li,{children:"Terminal 3: Run `ros2 topic echo /chatter`"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Questions"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"How many messages per second do you see?"}),"\n",(0,r.jsx)(s.li,{children:"Run `ros2 topic info /chatter` \u2014 how many publishers are listed?"}),"\n",(0,r.jsx)(s.li,{children:"Stop one talker \u2014 what happens to the message rate?"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Successfully ran multiple publishers on same topic"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Observed interleaved messages from both publishers"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Explained behavior in 2 to 3 sentences"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Estimated Time"}),": 15 minutes"]}),"\n",(0,r.jsx)(s.h3,{id:"exercise-2-custom-topic-publishing-required",children:"Exercise 2: Custom Topic Publishing (Required)"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Objective"}),": Publish data to a topic using the command line."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Tasks"}),":"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Create a new topic `/robot/joint_position` of type `std_msgs/msg/Float64`"}),"\n",(0,r.jsx)(s.li,{children:"Publish a value (e.g., 1.57 radians for 90 degrees)"}),"\n",(0,r.jsx)(s.li,{children:"Echo the topic in another terminal to verify"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Commands"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'# Terminal 1: Publish\nros2 topic pub /robot/joint_position std_msgs/msg/Float64 "data: 1.57" --rate 1\n\n# Terminal 2: Echo\nros2 topic echo /robot/joint_position\n'})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Topic publishes at 1 Hz"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Echo shows correct value"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Explained what `--rate 1` does"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Estimated Time"}),": 20 minutes"]}),"\n",(0,r.jsx)(s.h3,{id:"exercise-3-investigate-message-types-challenge",children:"Exercise 3: Investigate Message Types (Challenge)"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Objective"}),": Explore ROS 2 message types for sensors."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Tasks"}),":"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Find the message type for ",(0,r.jsx)(s.strong,{children:"IMU data"})," (Inertial Measurement Unit)"]}),"\n",(0,r.jsx)(s.li,{children:"Display the message definition"}),"\n",(0,r.jsxs)(s.li,{children:["Identify which fields store ",(0,r.jsx)(s.strong,{children:"angular velocity"})," and ",(0,r.jsx)(s.strong,{children:"linear acceleration"})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Hints"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# List all message types\nros2 interface list | grep Imu\n\n# Show message definition\nros2 interface show sensor_msgs/msg/Imu\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Questions"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"What is the full message type name?"}),"\n",(0,r.jsx)(s.li,{children:"Which coordinate frame is the IMU data expressed in?"}),"\n",(0,r.jsx)(s.li,{children:"Why does the message have `orientation_covariance` fields?"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Estimated Time"}),": 30 minutes"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/",children:"ROS 2 Humble Documentation"})," - Official reference"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Concepts.html",children:"ROS 2 Concepts"})," - Detailed architecture guide"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://www.omg.org/spec/DDS/",children:"DDS Specification"})," - Underlying middleware protocol"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://design.ros2.org/",children:"ROS 2 Design"})," - Why ROS 2 was redesigned from ROS 1"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html",children:"QoS Policies"})," - Reliability and durability settings"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Next"}),": [Chapter 1.2: Python Integration with rclpy \u2192](chapter-1 to 2.md)"]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>o});var i=n(6540);const r={},l=i.createContext(r);function t(e){const s=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:s},e.children)}}}]);