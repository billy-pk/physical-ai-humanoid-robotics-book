"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[5780],{1637:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"module-2/chapter-2-4","title":"2.4 URDF/SDF Robot Description","description":"URDF (Unified Robot Description Format) and SDF (Simulation Description Format) define robot structure, joints, links, sensors, and visual properties. This chapter covers converting URDF to SDF, optimizing models for Gazebo, and best practices for humanoid robot descriptions.","source":"@site/docs/module-2/chapter-2-4.md","sourceDirName":"module-2","slug":"/module-2/chapter-2-4","permalink":"/physical-ai-humanoid-robotics-book/docs/module-2/chapter-2-4","draft":false,"unlisted":false,"editUrl":"https://github.com/billy-pk/physical-ai-humanoid-robotics-book/tree/main/frontend/docs/module-2/chapter-2-4.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"2.4 URDF/SDF Robot Description"},"sidebar":"defaultSidebar","previous":{"title":"2.3 Sensor Simulation (LiDAR, Cameras, IMUs)","permalink":"/physical-ai-humanoid-robotics-book/docs/module-2/chapter-2-3"},"next":{"title":"2.5 Unity Integration for Photorealistic Rendering","permalink":"/physical-ai-humanoid-robotics-book/docs/module-2/chapter-2-5"}}');var r=i(4848),o=i(8453);const l={sidebar_position:5,title:"2.4 URDF/SDF Robot Description"},t="Chapter 2.4: URDF/SDF Robot Description",d={},a=[{value:"Learning Outcomes",id:"learning-outcomes",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Part 1: URDF vs. SDF",id:"part-1-urdf-vs-sdf",level:2},{value:"Format Comparison",id:"format-comparison",level:3},{value:"Conversion Process",id:"conversion-process",level:3},{value:"Part 2: Hands-On Tutorial",id:"part-2-hands-on-tutorial",level:2},{value:"Project: Optimize Humanoid Model for Gazebo",id:"project-optimize-humanoid-model-for-gazebo",level:3},{value:"Step 1: Convert URDF to SDF",id:"step-1-convert-urdf-to-sdf",level:3},{value:"Step 2: Optimize Collision Geometries",id:"step-2-optimize-collision-geometries",level:3},{value:"Step 3: Add Inertial Properties",id:"step-3-add-inertial-properties",level:3},{value:"Step 4: Define Joint Limits and Dynamics",id:"step-4-define-joint-limits-and-dynamics",level:3},{value:"Step 5: Add Material Properties",id:"step-5-add-material-properties",level:3},{value:"Step 6: Create Complete SDF Model",id:"step-6-create-complete-sdf-model",level:3},{value:"Step 7: Spawn SDF Model in Gazebo",id:"step-7-spawn-sdf-model-in-gazebo",level:3},{value:"Step 8: Debugging Model Issues",id:"step-8-debugging-model-issues",level:3},{value:"Issue 1: Model Not Loading",id:"issue-1-model-not-loading",level:4},{value:"Issue 2: Collision Detection Not Working",id:"issue-2-collision-detection-not-working",level:4},{value:"Issue 3: Robot Unstable (Falling Over)",id:"issue-3-robot-unstable-falling-over",level:4},{value:"Issue 4: Joints Not Moving",id:"issue-4-joints-not-moving",level:4},{value:"Part 3: Advanced Topics (Optional)",id:"part-3-advanced-topics-optional",level:2},{value:"Model Database Integration",id:"model-database-integration",level:3},{value:"Performance Optimization",id:"performance-optimization",level:3},{value:"Integration with Capstone",id:"integration-with-capstone",level:2},{value:"Summary",id:"summary",level:2},{value:"Exercises",id:"exercises",level:2},{value:"Exercise 1: URDF to SDF Conversion (Required)",id:"exercise-1-urdf-to-sdf-conversion-required",level:3},{value:"Exercise 2: Model Performance Comparison (Required)",id:"exercise-2-model-performance-comparison-required",level:3},{value:"Exercise 3: Complex Humanoid Model (Challenge)",id:"exercise-3-complex-humanoid-model-challenge",level:3},{value:"Additional Resources",id:"additional-resources",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"chapter-24-urdfsdf-robot-description",children:"Chapter 2.4: URDF/SDF Robot Description"})}),"\n",(0,r.jsx)(n.p,{children:"URDF (Unified Robot Description Format) and SDF (Simulation Description Format) define robot structure, joints, links, sensors, and visual properties. This chapter covers converting URDF to SDF, optimizing models for Gazebo, and best practices for humanoid robot descriptions."}),"\n",(0,r.jsx)(n.h2,{id:"learning-outcomes",children:"Learning Outcomes"}),"\n",(0,r.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Convert"})," URDF models to SDF format for Gazebo"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Optimize"})," robot models for simulation performance"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Define"})," collision geometries separate from visual geometries"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Add"})," sensors and actuators to robot descriptions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Debug"})," model loading and visualization issues"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"URDF modeling"})," experience (Module 1, Chapter 1.3)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Gazebo Classic 11"})," installed (Chapter 2.1)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ROS 2 Humble"})," configured"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Understanding"})," of XML syntax"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"part-1-urdf-vs-sdf",children:"Part 1: URDF vs. SDF"}),"\n",(0,r.jsx)(n.h3,{id:"format-comparison",children:"Format Comparison"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Aspect"}),(0,r.jsx)(n.th,{children:"URDF"}),(0,r.jsx)(n.th,{children:"SDF"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Purpose"})}),(0,r.jsx)(n.td,{children:"Robot description (ROS)"}),(0,r.jsx)(n.td,{children:"Simulation description (Gazebo)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Scope"})}),(0,r.jsx)(n.td,{children:"Single robot"}),(0,r.jsx)(n.td,{children:"World + robots + physics"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Sensors"})}),(0,r.jsx)(n.td,{children:"Limited support"}),(0,r.jsx)(n.td,{children:"Full sensor modeling"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Physics"})}),(0,r.jsx)(n.td,{children:"Basic"}),(0,r.jsx)(n.td,{children:"Advanced (friction, collisions)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Plugins"})}),(0,r.jsxs)(n.td,{children:["Via ",(0,r.jsx)(n.code,{children:"<gazebo>"})," tags"]}),(0,r.jsx)(n.td,{children:"Native support"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"When to use each"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"URDF"}),": ROS 2 packages, RViz2 visualization, robot_state_publisher"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SDF"}),": Gazebo simulation, complex physics, sensor plugins"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Best practice"}),": Start with URDF (ROS 2 compatibility), convert to SDF for Gazebo."]}),"\n",(0,r.jsx)(n.h3,{id:"conversion-process",children:"Conversion Process"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"URDF \u2192 SDF conversion"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Gazebo automatically converts URDF to SDF on load"}),"\n",(0,r.jsxs)(n.li,{children:["Manual conversion: ",(0,r.jsx)(n.code,{children:"gz sdf -k model.urdf > model.sdf"})]}),"\n",(0,r.jsx)(n.li,{children:"SDF provides more features (advanced physics, sensors)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"part-2-hands-on-tutorial",children:"Part 2: Hands-On Tutorial"}),"\n",(0,r.jsx)(n.h3,{id:"project-optimize-humanoid-model-for-gazebo",children:"Project: Optimize Humanoid Model for Gazebo"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Goal"}),": Convert URDF to SDF, optimize collision geometries, and improve simulation performance."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Tools"}),": Gazebo Classic 11, ",(0,r.jsx)(n.code,{children:"gz sdf"})," tool, URDF"]}),"\n",(0,r.jsx)(n.h3,{id:"step-1-convert-urdf-to-sdf",children:"Step 1: Convert URDF to SDF"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Install SDF tools"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install libsdformat-dev gz-sim\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Convert URDF to SDF"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/gazebo_ws/src/gazebo_worlds/models/simple_humanoid\n\n# Convert URDF to SDF\ngz sdf -k model.urdf > model.sdf\n\n# View SDF file\ncat model.sdf\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key differences in SDF"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"<model>"})})," instead of ",(0,r.jsx)(n.code,{children:"<robot>"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"<link>"})})," structure similar but with more physics options"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"<joint>"})})," includes damping and friction"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"<sensor>"})})," defined directly (not via Gazebo tags)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-2-optimize-collision-geometries",children:"Step 2: Optimize Collision Geometries"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Complex visual meshes slow down collision detection."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": Use simple collision geometries (boxes, spheres, cylinders)."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Original URDF"})," (complex visual):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<link name="torso">\n  <visual name="torso_visual">\n    <geometry>\n      <mesh filename="package://my_robot/meshes/torso.dae"/>\n    </geometry>\n  </visual>\n  <collision name="torso_collision">\n    <geometry>\n      <mesh filename="package://my_robot/meshes/torso.dae"/>  \x3c!-- Slow! --\x3e\n    </geometry>\n  </collision>\n</link>\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Optimized URDF"})," (simple collision):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<link name="torso">\n  <visual name="torso_visual">\n    <geometry>\n      <mesh filename="package://my_robot/meshes/torso.dae"/>  \x3c!-- Detailed visual --\x3e\n    </geometry>\n  </visual>\n  <collision name="torso_collision">\n    <geometry>\n      <box size="0.3 0.2 0.4"/>  \x3c!-- Simple box for collision --\x3e\n    </geometry>\n    <pose>0 0 0 0 0 0</pose>  \x3c!-- Match visual center --\x3e\n  </collision>\n</link>\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Performance improvement"}),": 10 to 100x faster collision detection!"]}),"\n",(0,r.jsx)(n.h3,{id:"step-3-add-inertial-properties",children:"Step 3: Add Inertial Properties"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Complete inertial definition"})," (for accurate physics):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<link name="thigh">\n  <inertial>\n    <mass>2.0</mass>\n    <pose>0 0 -0.15 0 0 0</pose>  \x3c!-- Center of mass offset --\x3e\n    <inertia>\n      \x3c!-- For cylinder: Ixx = Iyy = (1/12)*m*(3*r\xb2 + h\xb2) --\x3e\n      \x3c!-- For cylinder: Izz = (1/2)*m*r\xb2 --\x3e\n      <ixx>0.02</ixx>   \x3c!-- Rotation about X-axis --\x3e\n      <iyy>0.02</iyy>   \x3c!-- Rotation about Y-axis --\x3e\n      <izz>0.001</izz>  \x3c!-- Rotation about Z-axis (smaller for long cylinder) --\x3e\n      <ixy>0.0</ixy>    \x3c!-- Cross terms (0 for symmetric objects) --\x3e\n      <ixz>0.0</ixz>\n      <iyz>0.0</iyz>\n    </inertia>\n  </inertial>\n</link>\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Inertia formulas"})," (common shapes):"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Shape"}),(0,r.jsx)(n.th,{children:"Ixx, Iyy"}),(0,r.jsx)(n.th,{children:"Izz"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Box"})," (a\xd7b\xd7c)"]}),(0,r.jsxs)(n.td,{children:["(1/12)",(0,r.jsx)(n.em,{children:"m"}),"(b\xb2+c\xb2)"]}),(0,r.jsxs)(n.td,{children:["(1/12)",(0,r.jsx)(n.em,{children:"m"}),"(a\xb2+b\xb2)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Cylinder"})," (r, h)"]}),(0,r.jsxs)(n.td,{children:["(1/12)",(0,r.jsx)(n.em,{children:"m"}),"(3*r\xb2+h\xb2)"]}),(0,r.jsxs)(n.td,{children:["(1/2)",(0,r.jsx)(n.em,{children:"m"}),"r\xb2"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Sphere"})," (r)"]}),(0,r.jsxs)(n.td,{children:["(2/5)",(0,r.jsx)(n.em,{children:"m"}),"r\xb2"]}),(0,r.jsxs)(n.td,{children:["(2/5)",(0,r.jsx)(n.em,{children:"m"}),"r\xb2"]})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"step-4-define-joint-limits-and-dynamics",children:"Step 4: Define Joint Limits and Dynamics"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Complete joint definition"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<joint name="left_knee" type="revolute">\n  <parent link="left_thigh"/>\n  <child link="left_shank"/>\n  <origin xyz="0 0 -0.3" rpy="0 0 0"/>\n  <axis xyz="0 1 0"/>\n  \n  \x3c!-- Joint limits --\x3e\n  <limit lower="0" upper="3.14159" effort="100" velocity="10"/>\n  \n  \x3c!-- Joint dynamics (damping, friction) --\x3e\n  <dynamics damping="1.0" friction="0.1"/>\n  \n  \x3c!-- Safety limits (soft stops) --\x3e\n  <safety_controller soft_lower_limit="0.1" soft_upper_limit="3.0" k_position="100" k_velocity="10"/>\n</joint>\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key parameters"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"lower/upper"})}),": Hard limits (radians)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"effort"})}),": Maximum torque (N\u22c5m)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"velocity"})}),": Maximum angular velocity (rad/s)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"damping"})}),": Resistance to motion (reduces oscillation)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"friction"})}),": Static friction in joint"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-5-add-material-properties",children:"Step 5: Add Material Properties"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Define materials"})," (for visual appearance):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Define material --\x3e\n<material name="blue_plastic">\n  <color rgba="0 0.5 1 1"/>  \x3c!-- RGBA: Red, Green, Blue, Alpha --\x3e\n</material>\n\n\x3c!-- Use material in visual --\x3e\n<link name="torso">\n  <visual name="torso_visual">\n    <geometry>\n      <box size="0.3 0.2 0.4"/>\n    </geometry>\n    <material name="blue_plastic"/>\n  </visual>\n</link>\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Common materials"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Metal"}),": ",(0,r.jsx)(n.code,{children:'rgba="0.7 0.7 0.7 1"'})," (gray)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Plastic"}),": ",(0,r.jsx)(n.code,{children:'rgba="0.2 0.2 0.8 1"'})," (blue)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Rubber"}),": ",(0,r.jsx)(n.code,{children:'rgba="0.1 0.1 0.1 1"'})," (black)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-6-create-complete-sdf-model",children:"Step 6: Create Complete SDF Model"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"File"}),": ",(0,r.jsx)(n.code,{children:"models/simple_humanoid/model.sdf"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" ?>\n<sdf version="1.6">\n  <model name="simple_humanoid">\n    \n    \x3c!-- Base Link (Torso) --\x3e\n    <link name="torso">\n      <pose>0 0 1.0 0 0 0</pose>  \x3c!-- Initial pose --\x3e\n      \n      \x3c!-- Visual --\x3e\n      <visual name="torso_visual">\n        <geometry>\n          <box>\n            <size>0.3 0.2 0.4</size>\n          </box>\n        </geometry>\n        <material>\n          <script>\n            <name>Gazebo/Blue</name>\n            <uri>file://media/materials/scripts/gazebo.material</uri>\n          <\/script>\n        </material>\n      </visual>\n      \n      \x3c!-- Collision (optimized: simple box) --\x3e\n      <collision name="torso_collision">\n        <geometry>\n          <box>\n            <size>0.3 0.2 0.4</size>\n          </box>\n        </geometry>\n        <surface>\n          <friction>\n            <ode>\n              <mu>1.0</mu>\n              <mu2>0.8</mu2>\n            </ode>\n          </friction>\n        </surface>\n      </collision>\n      \n      \x3c!-- Inertial --\x3e\n      <inertial>\n        <mass>10.0</mass>\n        <pose>0 0 0 0 0 0</pose>\n        <inertia>\n          <ixx>0.2</ixx>\n          <iyy>0.15</iyy>\n          <izz>0.15</izz>\n        </inertia>\n      </inertial>\n    </link>\n\n    \x3c!-- Joints (same as URDF) --\x3e\n    <joint name="left_hip" type="revolute">\n      <parent>torso</parent>\n      <child>left_thigh</child>\n      <pose>0.1 0 -0.2 0 0 0</pose>\n      <axis>\n        <xyz>0 1 0</xyz>\n        <limit>\n          <lower>-1.57</lower>\n          <upper>1.57</upper>\n          <effort>100</effort>\n          <velocity>10</velocity>\n        </limit>\n        <dynamics>\n          <damping>1.0</damping>\n          <friction>0.1</friction>\n        </dynamics>\n      </axis>\n    </joint>\n\n    \x3c!-- Add other links and joints (similar structure) --\x3e\n    \n    \x3c!-- Sensors (defined directly in SDF) --\x3e\n    <link name="head">\n      \x3c!-- ... head link definition ... --\x3e\n      \n      <sensor name="camera" type="camera">\n        <camera>\n          <horizontal_fov>1.047</horizontal_fov>\n          <image>\n            <width>640</width>\n            <height>480</height>\n          </image>\n        </camera>\n        <plugin name="camera_controller" filename="libgazebo_ros_camera.so">\n          <ros>\n            <namespace>/humanoid</namespace>\n          </ros>\n          <frame_name>head_camera_frame</frame_name>\n        </plugin>\n      </sensor>\n    </link>\n\n  </model>\n</sdf>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"step-7-spawn-sdf-model-in-gazebo",children:"Step 7: Spawn SDF Model in Gazebo"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Launch file"})," (",(0,r.jsx)(n.code,{children:"launch/humanoid_sdf.launch.py"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\"\"\"\nLaunch humanoid SDF model in Gazebo\nROS 2 Humble | Gazebo Classic 11\n\"\"\"\nfrom launch import LaunchDescription\nfrom launch.actions import ExecuteProcess\nfrom launch_ros.actions import Node\nfrom launch_ros.substitutions import FindPackageShare\nimport os\n\ndef generate_launch_description():\n    pkg_share = FindPackageShare('gazebo_worlds').find('gazebo_worlds')\n    world_path = os.path.join(pkg_share, 'worlds', 'humanoid_physics.world')\n    sdf_path = os.path.join(pkg_share, 'models', 'simple_humanoid', 'model.sdf')\n\n    return LaunchDescription([\n        # Launch Gazebo\n        ExecuteProcess(\n            cmd=['gazebo', '--verbose', world_path],\n            output='screen'\n        ),\n        \n        # Spawn SDF model\n        Node(\n            package='gazebo_ros',\n            executable='spawn_entity.py',\n            arguments=['-entity', 'humanoid', '-file', sdf_path, '-x', '0', '-y', '0', '-z', '1.0'],\n            output='screen'\n        )\n    ])\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Launch"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 launch gazebo_worlds humanoid_sdf.launch.py\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-8-debugging-model-issues",children:"Step 8: Debugging Model Issues"}),"\n",(0,r.jsx)(n.h4,{id:"issue-1-model-not-loading",children:"Issue 1: Model Not Loading"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Gazebo shows error, model doesn't appear"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check SDF validity\ngz sdf -k model.sdf\n\n# Check for XML syntax errors\nxmllint --noout model.sdf\n\n# Verify model path\nls -la ~/.gazebo/models/simple_humanoid/\n"})}),"\n",(0,r.jsx)(n.h4,{id:"issue-2-collision-detection-not-working",children:"Issue 2: Collision Detection Not Working"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Objects pass through each other"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Ensure collision geometry defined --\x3e\n<collision name="link_collision">\n  <geometry>\n    <box size="0.3 0.2 0.4"/>\n  </geometry>\n</collision>\n\n\x3c!-- Check collision pose matches visual --\x3e\n<pose>0 0 0 0 0 0</pose>\n'})}),"\n",(0,r.jsx)(n.h4,{id:"issue-3-robot-unstable-falling-over",children:"Issue 3: Robot Unstable (Falling Over)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Robot tips over immediately"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Check center of mass --\x3e\n<inertial>\n  <pose>0 0 0 0 0 0</pose>  \x3c!-- Should be at geometric center --\x3e\n</inertial>\n\n\x3c!-- Increase base width (wider stance) --\x3e\n<link name="foot">\n  <geometry>\n    <box size="0.2 0.1 0.02"/>  \x3c!-- Wider foot = more stable --\x3e\n  </geometry>\n</link>\n'})}),"\n",(0,r.jsx)(n.h4,{id:"issue-4-joints-not-moving",children:"Issue 4: Joints Not Moving"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Joints don't respond to commands"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Verify joint type --\x3e\n<joint type="revolute">  \x3c!-- Not \'fixed\' --\x3e\n\n\x3c!-- Check joint limits --\x3e\n<limit lower="-3.14" upper="3.14"/>\n\n\x3c!-- Verify parent/child links exist --\x3e\n<parent>torso</parent>\n<child>left_thigh</child>\n'})}),"\n",(0,r.jsx)(n.h2,{id:"part-3-advanced-topics-optional",children:"Part 3: Advanced Topics (Optional)"}),"\n",(0,r.jsx)(n.h3,{id:"model-database-integration",children:"Model Database Integration"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Add model to Gazebo database"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Copy model to user directory\ncp -r ~/gazebo_ws/src/gazebo_worlds/models/simple_humanoid ~/.gazebo/models/\n\n# Verify\ngz model --list | grep humanoid\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use model in world file"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<include>\n  <uri>model://simple_humanoid</uri>\n  <pose>0 0 1.0 0 0 0</pose>\n  <name>humanoid_1</name>\n</include>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Tips for faster simulation"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Simple collision geometries"}),": Boxes/spheres instead of meshes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reduce sensor update rates"}),": 10 Hz instead of 30 Hz"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Disable unnecessary visuals"}),": Use ",(0,r.jsx)(n.code,{children:"<visual>"})," only when needed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Optimize physics timestep"}),": Larger timestep = faster (but less accurate)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"integration-with-capstone",children:"Integration with Capstone"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"How this chapter contributes"})," to the Week 13 autonomous humanoid:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Model optimization"}),": Capstone humanoid will have optimized collision geometries for real-time simulation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sensor integration"}),": All sensors (camera, LiDAR, IMU) defined in SDF"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Joint control"}),": Proper joint limits and dynamics for walking and manipulation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance"}),": Optimized model enables faster-than-real-time simulation for training"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Understanding URDF/SDF optimization now is essential for building the capstone robot model."}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(n.p,{children:"You learned:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u2705 Converted ",(0,r.jsx)(n.strong,{children:"URDF to SDF"})," format for Gazebo"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 Optimized ",(0,r.jsx)(n.strong,{children:"collision geometries"})," for performance"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 Defined ",(0,r.jsx)(n.strong,{children:"complete inertial properties"})," for accurate physics"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 Added ",(0,r.jsx)(n.strong,{children:"joint dynamics"})," (damping, friction) for stability"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 Debugged ",(0,r.jsx)(n.strong,{children:"model loading and visualization"})," issues"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Next steps"}),": In Chapter 2.5, you'll integrate Unity for photorealistic rendering and synthetic data generation."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,r.jsx)(n.h3,{id:"exercise-1-urdf-to-sdf-conversion-required",children:"Exercise 1: URDF to SDF Conversion (Required)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Objective"}),": Convert Module 1 URDF model to optimized SDF."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Tasks"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Take URDF from Module 1 (Chapter 1.3)"}),"\n",(0,r.jsxs)(n.li,{children:["Convert to SDF using ",(0,r.jsx)(n.code,{children:"gz sdf"})]}),"\n",(0,r.jsx)(n.li,{children:"Optimize collision geometries (replace meshes with primitives)"}),"\n",(0,r.jsx)(n.li,{children:"Add joint dynamics (damping, friction)"}),"\n",(0,r.jsx)(n.li,{children:"Verify model loads correctly in Gazebo"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","SDF file valid (no errors)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","All collision geometries optimized"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Model spawns correctly in Gazebo"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Physics simulation stable"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Estimated Time"}),": 90 minutes"]}),"\n",(0,r.jsx)(n.h3,{id:"exercise-2-model-performance-comparison-required",children:"Exercise 2: Model Performance Comparison (Required)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Objective"}),": Measure simulation performance with different collision geometries."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Tasks"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Create two versions of same model:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Version A: Mesh collision geometries"}),"\n",(0,r.jsx)(n.li,{children:"Version B: Primitive collision geometries"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Measure simulation FPS for each"}),"\n",(0,r.jsx)(n.li,{children:"Compare CPU usage"}),"\n",(0,r.jsx)(n.li,{children:"Document performance improvement"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Metrics"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Simulation FPS"}),"\n",(0,r.jsx)(n.li,{children:"CPU usage (%)"}),"\n",(0,r.jsx)(n.li,{children:"Memory usage (MB)"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Estimated Time"}),": 60 minutes"]}),"\n",(0,r.jsx)(n.h3,{id:"exercise-3-complex-humanoid-model-challenge",children:"Exercise 3: Complex Humanoid Model (Challenge)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Objective"}),": Create detailed humanoid model with arms and hands."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Tasks"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Add arms (shoulder, elbow, wrist joints)"}),"\n",(0,r.jsx)(n.li,{children:"Add hands (fingers with joints)"}),"\n",(0,r.jsx)(n.li,{children:"Optimize all collision geometries"}),"\n",(0,r.jsx)(n.li,{children:"Define proper inertial properties"}),"\n",(0,r.jsx)(n.li,{children:"Test in Gazebo with physics"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Requirements"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"20+ joints total"}),"\n",(0,r.jsx)(n.li,{children:"All links have collision/inertial properties"}),"\n",(0,r.jsx)(n.li,{children:"Model stable in simulation"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Estimated Time"}),": 180 minutes"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"http://wiki.ros.org/urdf/XML",children:"URDF Specification"})," - URDF format reference"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"http://sdformat.org/",children:"SDFormat Specification"})," - SDF format reference"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://app.gazebosim.org/",children:"Gazebo Model Database"})," - Browse models"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://www.omnicalculator.com/physics/moment-of-inertia",children:"Inertia Calculator"})," - Calculate inertia values"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Next"}),": [Chapter 2.5: Unity Integration for Photorealistic Rendering \u2192](chapter-2 to 5.md)"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var s=i(6540);const r={},o=s.createContext(r);function l(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);