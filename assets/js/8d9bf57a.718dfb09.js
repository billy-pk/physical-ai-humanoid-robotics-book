"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[8353],{3595:(e,s,r)=>{r.r(s),r.d(s,{default:()=>b});var a=r(6540),n=r(1656),o=r(1407),i=r(7229),t=r(4848);function l({onSuccess:e,onError:s}){const[r,n]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[p,h]=(0,a.useState)(!1);return(0,t.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),h(!0);try{const a=await o.Hh.email({email:r,password:l,name:d});console.log("SignUp result:",a),a.error?(console.error("SignUp error:",a.error),"USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL"===a.error.code?s?.("This email is already registered. Please sign in instead or use a different email."):s?.(a.error.message||"Sign up failed")):(console.log("SignUp successful, calling onSuccess"),await new Promise(e=>setTimeout(e,500)),e?.())}catch(n){console.error("SignUp exception:",n),s?.(n.message||"An unexpected error occurred")}finally{h(!1)}},className:i.A.form,children:[(0,t.jsx)("h2",{children:"Sign Up"}),(0,t.jsxs)("div",{className:i.A.field,children:[(0,t.jsx)("label",{htmlFor:"name",children:"Name"}),(0,t.jsx)("input",{id:"name",type:"text",value:d,onChange:e=>u(e.target.value),required:!0,disabled:p})]}),(0,t.jsxs)("div",{className:i.A.field,children:[(0,t.jsx)("label",{htmlFor:"email",children:"Email"}),(0,t.jsx)("input",{id:"email",type:"email",value:r,onChange:e=>n(e.target.value),required:!0,disabled:p})]}),(0,t.jsxs)("div",{className:i.A.field,children:[(0,t.jsx)("label",{htmlFor:"password",children:"Password"}),(0,t.jsx)("input",{id:"password",type:"password",value:l,onChange:e=>c(e.target.value),required:!0,minLength:8,disabled:p}),(0,t.jsx)("small",{children:"Minimum 8 characters"})]}),(0,t.jsx)("button",{type:"submit",disabled:p,className:i.A.button,children:p?"Signing up...":"Sign Up"})]})}var c=r(9345);const d={questionnaire:"questionnaire_ybk0",header:"header_cjdk",form:"form_s1MI",section:"section_kOK2",label:"label_hcId",required:"required_aqiK",helpText:"helpText_eCds",checkboxGroup:"checkboxGroup_KKmq",radioGroup:"radioGroup_NeK_",checkbox:"checkbox_tkL2",radio:"radio_Lwyf",input:"input_BORN",textarea:"textarea_z9iW",select:"select_j4P6",charCount:"charCount_IDJ4",fieldError:"fieldError_tffo",error:"error_tFoq",success:"success_ZrSf",actions:"actions_sBfR",buttonPrimary:"buttonPrimary_gZWf",buttonSecondary:"buttonSecondary_q9_w"},u=["Python","JavaScript/TypeScript","C++","C","Java","ROS (Robot Operating System)","MATLAB","Rust","Go","None"],p=["Arduino","Raspberry Pi","ESP32/ESP8266","ROS-compatible robots","Sensors (camera, LiDAR, IMU, etc.)","Microcontrollers","3D Printing","CNC Machining","None"];function h({onComplete:e,onCancel:s}){const{user:r}=(0,c.A)(),[n,o]=(0,a.useState)({software_background:[],hardware_background:[],experience_level:"beginner",learning_goals:"",has_robotics_projects:!1,robotics_projects_description:"",programming_years:void 0,learning_style:void 0}),[i,l]=(0,a.useState)({}),[h,g]=(0,a.useState)(!1),[m,x]=(0,a.useState)(null);return(0,t.jsxs)("div",{className:d.questionnaire,children:[(0,t.jsxs)("div",{className:d.header,children:[(0,t.jsx)("h2",{children:"Tell Us About Yourself"}),(0,t.jsx)("p",{children:"Help us personalize your learning experience by sharing your background."})]}),(0,t.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),x(null),(()=>{const e={};return 0===n.software_background.length&&(e.software_background="Please select at least one option or 'None'"),0===n.hardware_background.length&&(e.hardware_background="Please select at least one option or 'None'"),n.experience_level||(e.experience_level="Please select your experience level"),n.has_robotics_projects&&!n.robotics_projects_description?.trim()&&(e.robotics_projects_description="Please describe your robotics projects"),n.learning_goals&&n.learning_goals.length>500&&(e.learning_goals="Learning goals must be 500 characters or less"),l(e),0===Object.keys(e).length})()){g(!0);try{console.log("Fetching session from Better Auth...");const s=await fetch("http://localhost:3001/api/auth/get-session",{credentials:"include"});if(console.log("Session response status:",s.status),!s.ok)throw console.error("Failed to get session:",s.status),new Error("Not authenticated. Please sign in again.");const r=await s.json();console.log("Session data:",r);let a=r?.session?.token||r?.session?.id;if(console.log("Session token:",a?`${a.substring(0,20)}...`:"MISSING"),!a)throw console.error("No session token found in response"),new Error("Not authenticated. Please sign in again.");console.log("Sending questionnaire data to FastAPI...");const o=await fetch("http://localhost:8000/api/auth/profile/background",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},credentials:"include",body:JSON.stringify({software_background:n.software_background.filter(e=>"None"!==e),hardware_background:n.hardware_background.filter(e=>"None"!==e),experience_level:n.experience_level,learning_goals:n.learning_goals||void 0,has_robotics_projects:n.has_robotics_projects,robotics_projects_description:n.has_robotics_projects?n.robotics_projects_description:void 0,programming_years:n.programming_years,learning_style:n.learning_style})});if(console.log("FastAPI response status:",o.status),!o.ok){const e=await o.json().catch(()=>({}));throw console.error("FastAPI error:",e),new Error(e.detail||"Failed to save questionnaire")}const i=await o.json();console.log("Success! Response:",i),e?.()}catch(r){console.error("Questionnaire submission error:",r),x(r.message||"An error occurred while saving your information")}finally{g(!1)}}},className:d.form,children:[m&&(0,t.jsx)("div",{className:d.error,children:m}),(0,t.jsxs)("div",{className:d.section,children:[(0,t.jsxs)("label",{className:d.label,children:["Software Background ",(0,t.jsx)("span",{className:d.required,children:"*"})]}),(0,t.jsx)("p",{className:d.helpText,children:"Select all that apply"}),(0,t.jsx)("div",{className:d.checkboxGroup,children:u.map(e=>(0,t.jsxs)("label",{className:d.checkbox,children:[(0,t.jsx)("input",{type:"checkbox",checked:n.software_background.includes(e),onChange:()=>(e=>{o(s=>{const r=s.software_background;if("None"===e)return{...s,software_background:["None"]};const a=r.filter(e=>"None"!==e);return a.includes(e)?{...s,software_background:a.filter(s=>s!==e)}:{...s,software_background:[...a,e]}})})(e)}),(0,t.jsx)("span",{children:e})]},e))}),i.software_background&&(0,t.jsx)("span",{className:d.fieldError,children:i.software_background})]}),(0,t.jsxs)("div",{className:d.section,children:[(0,t.jsxs)("label",{className:d.label,children:["Hardware Background ",(0,t.jsx)("span",{className:d.required,children:"*"})]}),(0,t.jsx)("p",{className:d.helpText,children:"Select all that apply"}),(0,t.jsx)("div",{className:d.checkboxGroup,children:p.map(e=>(0,t.jsxs)("label",{className:d.checkbox,children:[(0,t.jsx)("input",{type:"checkbox",checked:n.hardware_background.includes(e),onChange:()=>(e=>{o(s=>{const r=s.hardware_background;if("None"===e)return{...s,hardware_background:["None"]};const a=r.filter(e=>"None"!==e);return a.includes(e)?{...s,hardware_background:a.filter(s=>s!==e)}:{...s,hardware_background:[...a,e]}})})(e)}),(0,t.jsx)("span",{children:e})]},e))}),i.hardware_background&&(0,t.jsx)("span",{className:d.fieldError,children:i.hardware_background})]}),(0,t.jsxs)("div",{className:d.section,children:[(0,t.jsxs)("label",{className:d.label,children:["Experience Level ",(0,t.jsx)("span",{className:d.required,children:"*"})]}),(0,t.jsx)("div",{className:d.radioGroup,children:["beginner","intermediate","advanced"].map(e=>(0,t.jsxs)("label",{className:d.radio,children:[(0,t.jsx)("input",{type:"radio",name:"experience_level",value:e,checked:n.experience_level===e,onChange:e=>o(s=>({...s,experience_level:e.target.value}))}),(0,t.jsx)("span",{children:e.charAt(0).toUpperCase()+e.slice(1)})]},e))}),i.experience_level&&(0,t.jsx)("span",{className:d.fieldError,children:i.experience_level})]}),(0,t.jsxs)("div",{className:d.section,children:[(0,t.jsx)("label",{className:d.label,children:"Years of Programming Experience"}),(0,t.jsx)("input",{type:"number",min:"0",max:"50",value:n.programming_years||"",onChange:e=>o(s=>({...s,programming_years:e.target.value?parseInt(e.target.value,10):void 0})),className:d.input,placeholder:"e.g., 5"})]}),(0,t.jsxs)("div",{className:d.section,children:[(0,t.jsx)("label",{className:d.label,children:"Learning Goals"}),(0,t.jsx)("p",{className:d.helpText,children:"What do you hope to achieve? (Optional, max 500 characters)"}),(0,t.jsx)("textarea",{value:n.learning_goals,onChange:e=>o(s=>({...s,learning_goals:e.target.value})),className:d.textarea,rows:4,maxLength:500,placeholder:"e.g., Build a humanoid robot that can navigate autonomously..."}),(0,t.jsxs)("div",{className:d.charCount,children:[n.learning_goals.length,"/500 characters"]}),i.learning_goals&&(0,t.jsx)("span",{className:d.fieldError,children:i.learning_goals})]}),(0,t.jsx)("div",{className:d.section,children:(0,t.jsxs)("label",{className:d.checkbox,children:[(0,t.jsx)("input",{type:"checkbox",checked:n.has_robotics_projects,onChange:e=>o(s=>({...s,has_robotics_projects:e.target.checked,robotics_projects_description:e.target.checked?s.robotics_projects_description:""}))}),(0,t.jsx)("span",{children:"I have prior robotics projects"})]})}),n.has_robotics_projects&&(0,t.jsxs)("div",{className:d.section,children:[(0,t.jsxs)("label",{className:d.label,children:["Describe Your Robotics Projects ",(0,t.jsx)("span",{className:d.required,children:"*"})]}),(0,t.jsx)("textarea",{value:n.robotics_projects_description||"",onChange:e=>o(s=>({...s,robotics_projects_description:e.target.value})),className:d.textarea,rows:3,placeholder:"Tell us about your robotics projects...",required:!0}),i.robotics_projects_description&&(0,t.jsx)("span",{className:d.fieldError,children:i.robotics_projects_description})]}),(0,t.jsxs)("div",{className:d.section,children:[(0,t.jsx)("label",{className:d.label,children:"Preferred Learning Style"}),(0,t.jsxs)("select",{value:n.learning_style||"",onChange:e=>o(s=>({...s,learning_style:e.target.value?e.target.value:void 0})),className:d.select,children:[(0,t.jsx)("option",{value:"",children:"Select an option..."}),(0,t.jsx)("option",{value:"visual",children:"Visual (diagrams, videos, images)"}),(0,t.jsx)("option",{value:"hands-on",children:"Hands-on (practical exercises, building)"}),(0,t.jsx)("option",{value:"theoretical",children:"Theoretical (concepts, principles, theory)"}),(0,t.jsx)("option",{value:"mixed",children:"Mixed (combination of approaches)"})]})]}),(0,t.jsxs)("div",{className:d.actions,children:[s&&(0,t.jsx)("button",{type:"button",onClick:s,className:d.buttonSecondary,disabled:h,children:"Skip for Now"}),(0,t.jsx)("button",{type:"submit",className:d.buttonPrimary,disabled:h,children:h?"Saving...":"Save & Continue"})]})]})]})}var g=r(6347);const m={container:"container_ML1B",progress:"progress_lsoM",progressSteps:"progressSteps_jLS6",step:"step_v_rq",active:"active_AmhN",completed:"completed_rjD6",stepNumber:"stepNumber_RB3u",stepLabel:"stepLabel_gcKq",progressLine:"progressLine_Ehzt",content:"content_NXcf",error:"error_uu2B",complete:"complete_xbc5"};function x({onComplete:e}){const{user:s,isLoading:n}=(0,c.A)(),o=(0,g.W6)(),[i,d]=(0,a.useState)("signup"),[u,p]=(0,a.useState)(null);return a.useEffect(()=>{console.log("SignUpFlow step changed to:",i)},[i]),(0,t.jsxs)("div",{className:m.container,children:[(0,t.jsx)("div",{className:m.progress,children:(0,t.jsxs)("div",{className:m.progressSteps,children:[(0,t.jsxs)("div",{className:`${m.step} ${"signup"===i?m.active:"questionnaire"===i||"complete"===i?m.completed:""}`,children:[(0,t.jsx)("div",{className:m.stepNumber,children:"1"}),(0,t.jsx)("div",{className:m.stepLabel,children:"Sign Up"})]}),(0,t.jsx)("div",{className:m.progressLine}),(0,t.jsxs)("div",{className:`${m.step} ${"questionnaire"===i?m.active:"complete"===i?m.completed:""}`,children:[(0,t.jsx)("div",{className:m.stepNumber,children:"2"}),(0,t.jsx)("div",{className:m.stepLabel,children:"Background"})]}),(0,t.jsx)("div",{className:m.progressLine}),(0,t.jsxs)("div",{className:`${m.step} ${"complete"===i?m.active:""}`,children:[(0,t.jsx)("div",{className:m.stepNumber,children:"3"}),(0,t.jsx)("div",{className:m.stepLabel,children:"Complete"})]})]})}),(0,t.jsxs)("div",{className:m.content,children:[u&&(0,t.jsx)("div",{className:m.error,children:u}),"signup"===i&&(0,t.jsxs)(t.Fragment,{children:[s&&(0,t.jsxs)("div",{style:{padding:"2rem",textAlign:"center"},children:[(0,t.jsxs)("p",{style:{marginBottom:"1rem"},children:["You're already signed in as ",s.email]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[(0,t.jsx)("button",{onClick:()=>d("questionnaire"),style:{padding:"0.75rem 1.5rem",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:"Continue to Questionnaire"}),(0,t.jsx)("button",{onClick:async()=>{const{signOut:e}=await Promise.resolve().then(r.bind(r,1407));await e(),window.location.reload()},style:{padding:"0.75rem 1.5rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:"Sign Out & Sign Up New Account"})]})]}),!s&&!n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l,{onSuccess:()=>{console.log("handleSignupSuccess called, moving to questionnaire"),p(null),d("questionnaire"),console.log("Step set to:","questionnaire")},onError:p}),u&&u.includes("already registered")&&(0,t.jsxs)("div",{style:{marginTop:"1rem",textAlign:"center"},children:[(0,t.jsx)("p",{children:"Already have an account?"}),(0,t.jsx)("button",{onClick:()=>o.push("/signin"),style:{marginTop:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Sign In Instead"})]})]}),n&&(0,t.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:(0,t.jsx)("p",{children:"Loading..."})})]}),"questionnaire"===i&&(0,t.jsx)(h,{onComplete:()=>{d("complete"),setTimeout(()=>{e?.()},2e3)},onCancel:()=>{d("complete"),setTimeout(()=>{e?.()},1e3)}}),"complete"===i&&(0,t.jsxs)("div",{className:m.complete,children:[(0,t.jsx)("h2",{children:"\ud83c\udf89 Welcome!"}),(0,t.jsx)("p",{children:"Your account has been created successfully."}),(0,t.jsx)("p",{children:"You can now start exploring personalized content."})]})]})]})}function b(){const e=(0,g.W6)();return(0,t.jsx)(n.A,{title:"Sign Up",description:"Create your account to get started",children:(0,t.jsx)("div",{style:{padding:"2rem 0",minHeight:"80vh"},children:(0,t.jsx)(x,{onComplete:()=>{e.push("/")}})})})}},7229:(e,s,r)=>{r.d(s,{A:()=>a});const a={form:"form_dUdv",field:"field_fEl5",button:"button_sYWY",error:"error_J0pE",success:"success_fV5n"}}}]);