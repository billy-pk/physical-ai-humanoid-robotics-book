"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[8433],{3179:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"module-2/chapter-2-5","title":"2.5 Unity Integration for Photorealistic Rendering","description":"While Gazebo provides accurate physics, Unity offers photorealistic rendering with ray-traced lighting, realistic materials, and massive asset libraries. Combining both enables physics-accurate simulation with visual realism\u2014essential for training vision-based AI models and validating humanoid robot behaviors in realistic environments.","source":"@site/docs/module-2/chapter-2-5.md","sourceDirName":"module-2","slug":"/module-2/chapter-2-5","permalink":"/physical-ai-humanoid-robotics-book/docs/module-2/chapter-2-5","draft":false,"unlisted":false,"editUrl":"https://github.com/billy-pk/physical-ai-humanoid-robotics-book/tree/main/frontend/docs/module-2/chapter-2-5.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"2.5 Unity Integration for Photorealistic Rendering"},"sidebar":"defaultSidebar","previous":{"title":"2.4 URDF/SDF Robot Description","permalink":"/physical-ai-humanoid-robotics-book/docs/module-2/chapter-2-4"},"next":{"title":"Module 3 Introduction","permalink":"/physical-ai-humanoid-robotics-book/docs/module-3/intro"}}');var t=i(4848),r=i(8453);const o={sidebar_position:6,title:"2.5 Unity Integration for Photorealistic Rendering"},l="Chapter 2.5: Unity Integration for Photorealistic Rendering",c={},a=[{value:"Learning Outcomes",id:"learning-outcomes",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Part 1: Unity-ROS 2 Integration Architecture",id:"part-1-unity-ros-2-integration-architecture",level:2},{value:"Why Unity + Gazebo?",id:"why-unity--gazebo",level:3},{value:"Integration Approaches",id:"integration-approaches",level:3},{value:"ROS 2 Unity Packages",id:"ros-2-unity-packages",level:3},{value:"Part 2: Hands-On Tutorial",id:"part-2-hands-on-tutorial",level:2},{value:"Project: Create Photorealistic Humanoid Scene in Unity",id:"project-create-photorealistic-humanoid-scene-in-unity",level:3},{value:"Step 1: Install Unity and ROS 2 Bridge",id:"step-1-install-unity-and-ros-2-bridge",level:3},{value:"Step 2: Set Up ROS 2 Connection in Unity",id:"step-2-set-up-ros-2-connection-in-unity",level:3},{value:"Step 3: Import Robot Model into Unity",id:"step-3-import-robot-model-into-unity",level:3},{value:"Step 4: Configure Photorealistic Rendering",id:"step-4-configure-photorealistic-rendering",level:3},{value:"Step 5: Generate Synthetic Training Data",id:"step-5-generate-synthetic-training-data",level:3},{value:"Step 6: Sync Unity with Gazebo (Optional)",id:"step-6-sync-unity-with-gazebo-optional",level:3},{value:"Step 7: Debugging Common Issues",id:"step-7-debugging-common-issues",level:3},{value:"Issue 1: Unity Can&#39;t Connect to ROS 2",id:"issue-1-unity-cant-connect-to-ros-2",level:4},{value:"Issue 2: Robot Model Not Visible",id:"issue-2-robot-model-not-visible",level:4},{value:"Issue 3: Low Frame Rate",id:"issue-3-low-frame-rate",level:4},{value:"Part 3: Advanced Topics (Optional)",id:"part-3-advanced-topics-optional",level:2},{value:"Domain Randomization",id:"domain-randomization",level:3},{value:"ROS 2 Action Integration",id:"ros-2-action-integration",level:3},{value:"Integration with Capstone",id:"integration-with-capstone",level:2},{value:"Summary",id:"summary",level:2},{value:"Exercises",id:"exercises",level:2},{value:"Exercise 1: Unity-ROS 2 Communication (Required)",id:"exercise-1-unity-ros-2-communication-required",level:3},{value:"Exercise 2: Photorealistic Scene (Required)",id:"exercise-2-photorealistic-scene-required",level:3},{value:"Exercise 3: Synthetic Data Generation (Challenge)",id:"exercise-3-synthetic-data-generation-challenge",level:3},{value:"Additional Resources",id:"additional-resources",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"chapter-25-unity-integration-for-photorealistic-rendering",children:"Chapter 2.5: Unity Integration for Photorealistic Rendering"})}),"\n",(0,t.jsx)(e.p,{children:"While Gazebo provides accurate physics, Unity offers photorealistic rendering with ray-traced lighting, realistic materials, and massive asset libraries. Combining both enables physics-accurate simulation with visual realism\u2014essential for training vision-based AI models and validating humanoid robot behaviors in realistic environments."}),"\n",(0,t.jsx)(e.h2,{id:"learning-outcomes",children:"Learning Outcomes"}),"\n",(0,t.jsx)(e.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Set up"})," Unity-ROS 2 bridge for bidirectional communication"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Import"})," robot models into Unity with proper materials and lighting"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Configure"})," ray-traced rendering for photorealistic visuals"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Generate"})," synthetic training data (images, depth maps) for ML models"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Integrate"})," Unity scenes with Gazebo physics simulation"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Unity 2022.3 LTS"})," installed (free, download from unity.com)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"ROS 2 Humble"})," configured (Module 1)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Gazebo"})," experience (Chapters 2.1 to 2.4)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Basic Unity"})," knowledge (scenes, GameObjects, materials) - optional but helpful"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"part-1-unity-ros-2-integration-architecture",children:"Part 1: Unity-ROS 2 Integration Architecture"}),"\n",(0,t.jsx)(e.h3,{id:"why-unity--gazebo",children:"Why Unity + Gazebo?"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Gazebo strengths"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Accurate physics simulation"}),"\n",(0,t.jsx)(e.li,{children:"Native ROS 2 integration"}),"\n",(0,t.jsx)(e.li,{children:"Real-time sensor models"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Unity strengths"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Photorealistic rendering (ray tracing, global illumination)"}),"\n",(0,t.jsx)(e.li,{children:"Massive asset library (environments, objects, textures)"}),"\n",(0,t.jsx)(e.li,{children:"ML training data generation"}),"\n",(0,t.jsx)(e.li,{children:"Cross-platform (Windows, macOS, Linux)"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Together"}),": Physics accuracy + visual realism = production-ready simulation pipeline"]}),"\n",(0,t.jsx)(e.h3,{id:"integration-approaches",children:"Integration Approaches"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Approach"}),(0,t.jsx)(e.th,{children:"Use Case"}),(0,t.jsx)(e.th,{children:"Complexity"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Unity-ROS 2 Bridge"})}),(0,t.jsx)(e.td,{children:"Real-time sync, bidirectional"}),(0,t.jsx)(e.td,{children:"Medium"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Export from Gazebo"})}),(0,t.jsx)(e.td,{children:"One-time model transfer"}),(0,t.jsx)(e.td,{children:"Low"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Dual Simulation"})}),(0,t.jsx)(e.td,{children:"Physics in Gazebo, rendering in Unity"}),(0,t.jsx)(e.td,{children:"High"})]})]})]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"This chapter uses Unity-ROS 2 Bridge"})," (most flexible)."]}),"\n",(0,t.jsx)(e.h3,{id:"ros-2-unity-packages",children:"ROS 2 Unity Packages"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Key packages"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:(0,t.jsx)(e.code,{children:"ros2-for-unity"})}),": Core ROS 2 communication"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:(0,t.jsx)(e.code,{children:"ros_tcp_connector"})}),": TCP bridge between Unity and ROS 2"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:(0,t.jsx)(e.code,{children:"Unity Robotics Hub"})}),": Official Unity robotics tools"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"part-2-hands-on-tutorial",children:"Part 2: Hands-On Tutorial"}),"\n",(0,t.jsx)(e.h3,{id:"project-create-photorealistic-humanoid-scene-in-unity",children:"Project: Create Photorealistic Humanoid Scene in Unity"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Goal"}),": Import humanoid robot into Unity, set up ROS 2 communication, and generate synthetic training images."]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Tools"}),": Unity 2022.3 LTS, ROS 2 Humble, ROS-TCP-Connector"]}),"\n",(0,t.jsx)(e.h3,{id:"step-1-install-unity-and-ros-2-bridge",children:"Step 1: Install Unity and ROS 2 Bridge"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Install Unity 2022.3 LTS"}),":"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["Download from ",(0,t.jsx)(e.a,{href:"https://unity.com/download",children:"unity.com/download"})]}),"\n",(0,t.jsx)(e.li,{children:"Install Unity Hub"}),"\n",(0,t.jsx)(e.li,{children:"Install Unity Editor 2022.3 LTS"}),"\n",(0,t.jsx)(e.li,{children:'Create new 3D project: "HumanoidSimulation"'}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Install ROS-TCP-Connector"})," (Unity package):"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["In Unity: ",(0,t.jsx)(e.code,{children:"Window \u2192 Package Manager"})]}),"\n",(0,t.jsxs)(e.li,{children:["Click ",(0,t.jsx)(e.code,{children:"+ \u2192 Add package from git URL"})]}),"\n",(0,t.jsxs)(e.li,{children:["Enter: ",(0,t.jsx)(e.code,{children:"https://github.com/Unity-Technologies/ROS-TCP-Connector.git?path=/com.unity.robotics.ros-tcp-connector"})]}),"\n",(0,t.jsxs)(e.li,{children:["Click ",(0,t.jsx)(e.code,{children:"Add"})]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Install ROS 2 dependencies"})," (Ubuntu):"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# Install ROS 2 Unity bridge\nsudo apt install ros-humble-rosbridge-suite\n\n# Install ROS-TCP endpoint (Python)\npip3 install ros-tcp-endpoint\n"})}),"\n",(0,t.jsx)(e.h3,{id:"step-2-set-up-ros-2-connection-in-unity",children:"Step 2: Set Up ROS 2 Connection in Unity"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Create ROS connection script"}),": ",(0,t.jsx)(e.code,{children:"Assets/Scripts/ROSConnection.cs"})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\nusing Unity.Robotics.ROSTCPConnector;\nusing Unity.Robotics.ROSTCPConnector.MessageGeneration;\nusing sensor_msgs.msg;\n\npublic class ROSConnection : MonoBehaviour\n{\n    private ROSConnection ros;\n    private string topicName = "/humanoid/camera/image_raw";\n    \n    void Start()\n    {\n        // Connect to ROS 2\n        ros = ROSConnection.GetOrCreateInstance();\n        ros.Connect("localhost", 10000);  // Default ROS-TCP port\n        \n        Debug.Log("Connected to ROS 2");\n    }\n    \n    void OnDestroy()\n    {\n        if (ros != null)\n        {\n            ros.Disconnect();\n        }\n    }\n}\n'})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Create ROS-TCP endpoint"})," (Python): ",(0,t.jsx)(e.code,{children:"ros_tcp_endpoint.py"})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"#!/usr/bin/env python3\n\"\"\"\nROS-TCP Endpoint for Unity-ROS 2 communication\nROS 2 Humble | Python 3.10+\n\"\"\"\nfrom ros_tcp_endpoint import TcpServer, RosPublisher, RosSubscriber\nimport rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import Image, JointState\nfrom geometry_msgs.msg import Twist\n\nclass UnityROSBridge(Node):\n    def __init__(self):\n        super().__init__('unity_ros_bridge')\n        self.get_logger().info('Unity ROS Bridge started')\n\ndef main():\n    rclpy.init()\n    node = UnityROSBridge()\n    \n    # Create TCP server\n    tcp_server = TcpServer(node, 'localhost', 10000)\n    \n    # Register publishers (Unity \u2192 ROS 2)\n    tcp_server.register_publisher('/humanoid/joint_states', JointState)\n    \n    # Register subscribers (ROS 2 \u2192 Unity)\n    tcp_server.register_subscriber('/humanoid/cmd_vel', Twist)\n    \n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Run ROS-TCP endpoint"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"python3 ros_tcp_endpoint.py\n"})}),"\n",(0,t.jsx)(e.h3,{id:"step-3-import-robot-model-into-unity",children:"Step 3: Import Robot Model into Unity"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Option A: Export from Gazebo"})," (simplest):"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# Export URDF as OBJ/STL (use mesh export tools)\n# Or use Blender to convert URDF meshes\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Option B: Create in Unity"})," (more control):"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Create GameObject hierarchy:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"Humanoid"})," (root)","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"Torso"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.code,{children:"Head"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.code,{children:"LeftArm"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.code,{children:"RightArm"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.code,{children:"LeftLeg"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.code,{children:"RightLeg"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Add primitive shapes (Cubes, Cylinders) matching URDF dimensions"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Add materials:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Create materials in ",(0,t.jsx)(e.code,{children:"Assets/Materials/"})]}),"\n",(0,t.jsx)(e.li,{children:"Assign colors/textures to each link"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Example Unity script"})," (",(0,t.jsx)(e.code,{children:"Assets/Scripts/RobotController.cs"}),"):"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\nusing Unity.Robotics.ROSTCPConnector;\nusing sensor_msgs.msg;\n\npublic class RobotController : MonoBehaviour\n{\n    private ROSConnection ros;\n    private GameObject torso, head, leftLeg, rightLeg;\n    \n    void Start()\n    {\n        ros = ROSConnection.GetOrCreateInstance();\n        \n        // Get robot parts\n        torso = GameObject.Find("Torso");\n        head = GameObject.Find("Head");\n        leftLeg = GameObject.Find("LeftLeg");\n        rightLeg = GameObject.Find("RightLeg");\n        \n        // Subscribe to joint states\n        ros.Subscribe<JointState>("/humanoid/joint_states", UpdateJoints);\n    }\n    \n    void UpdateJoints(JointState jointState)\n    {\n        // Update joint angles based on ROS 2 messages\n        // Example: leftLeg.transform.localRotation = Quaternion.Euler(0, jointState.position[0], 0);\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"step-4-configure-photorealistic-rendering",children:"Step 4: Configure Photorealistic Rendering"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Enable HDRP"})," (High Definition Render Pipeline):"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.code,{children:"Edit \u2192 Project Settings \u2192 Graphics"})}),"\n",(0,t.jsxs)(e.li,{children:["Set ",(0,t.jsx)(e.code,{children:"Scriptable Render Pipeline Settings"})," to HDRP asset"]}),"\n",(0,t.jsxs)(e.li,{children:["Create HDRP asset: ",(0,t.jsx)(e.code,{children:"Assets \u2192 Create \u2192 Rendering \u2192 HDRP Asset"})]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Configure ray tracing"})," (if GPU supports):"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.code,{children:"Edit \u2192 Project Settings \u2192 Graphics \u2192 HDRP Global Settings"})}),"\n",(0,t.jsxs)(e.li,{children:["Enable ",(0,t.jsx)(e.code,{children:"Ray Tracing"})]}),"\n",(0,t.jsxs)(e.li,{children:["Set ",(0,t.jsx)(e.code,{children:"Ray Tracing Quality"})," to High"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Add lighting"}),":"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["Create ",(0,t.jsx)(e.code,{children:"Directional Light"})," (sun)"]}),"\n",(0,t.jsx)(e.li,{children:"Set intensity: 3.0"}),"\n",(0,t.jsxs)(e.li,{children:["Enable shadows: ",(0,t.jsx)(e.code,{children:"Soft Shadows"})]}),"\n",(0,t.jsxs)(e.li,{children:["Add ",(0,t.jsx)(e.code,{children:"HDRI Sky"})," for realistic environment"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Configure camera"}),":"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["Create ",(0,t.jsx)(e.code,{children:"Camera"})," GameObject"]}),"\n",(0,t.jsxs)(e.li,{children:["Set position: ",(0,t.jsx)(e.code,{children:"(0, 1.6, -2)"})," (humanoid eye height)"]}),"\n",(0,t.jsx)(e.li,{children:"Set field of view: 60\xb0"}),"\n",(0,t.jsx)(e.li,{children:"Enable HDR"}),"\n",(0,t.jsx)(e.li,{children:"Add post-processing: Bloom, Color Grading"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"step-5-generate-synthetic-training-data",children:"Step 5: Generate Synthetic Training Data"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Create data collection script"}),": ",(0,t.jsx)(e.code,{children:"Assets/Scripts/DataCollector.cs"})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using UnityEngine;\nusing System.IO;\nusing System.Collections;\n\npublic class DataCollector : MonoBehaviour\n{\n    public Camera renderCamera;\n    public string outputPath = "Assets/TrainingData/";\n    public int imageWidth = 640;\n    public int imageHeight = 480;\n    public int frameRate = 30;\n    \n    private int frameCount = 0;\n    private float timer = 0f;\n    \n    void Start()\n    {\n        // Create output directory\n        Directory.CreateDirectory(outputPath);\n        Directory.CreateDirectory(outputPath + "rgb/");\n        Directory.CreateDirectory(outputPath + "depth/");\n        Directory.CreateDirectory(outputPath + "labels/");\n    }\n    \n    void Update()\n    {\n        timer += Time.deltaTime;\n        \n        if (timer >= 1f / frameRate)\n        {\n            CaptureFrame();\n            timer = 0f;\n        }\n    }\n    \n    void CaptureFrame()\n    {\n        // Render RGB image\n        RenderTexture rgbRT = new RenderTexture(imageWidth, imageHeight, 24);\n        renderCamera.targetTexture = rgbRT;\n        renderCamera.Render();\n        \n        RenderTexture.active = rgbRT;\n        Texture2D rgbImage = new Texture2D(imageWidth, imageHeight, TextureFormat.RGB24, false);\n        rgbImage.ReadPixels(new Rect(0, 0, imageWidth, imageHeight), 0, 0);\n        rgbImage.Apply();\n        \n        // Save RGB image\n        byte[] rgbBytes = rgbImage.EncodeToPNG();\n        File.WriteAllBytes($"{outputPath}rgb/frame_{frameCount:06d}.png", rgbBytes);\n        \n        // Render depth image (if depth camera configured)\n        // Similar process for depth map\n        \n        frameCount++;\n    }\n}\n'})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Use case"}),": Generate thousands of training images for object detection models."]}),"\n",(0,t.jsx)(e.h3,{id:"step-6-sync-unity-with-gazebo-optional",children:"Step 6: Sync Unity with Gazebo (Optional)"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Dual simulation approach"}),":"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Gazebo"}),": Runs physics simulation, publishes joint states"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Unity"}),": Receives joint states, renders visually"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"ROS 2"}),": Bridges communication between both"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Unity script"})," (subscribe to Gazebo joint states):"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'using Unity.Robotics.ROSTCPConnector;\nusing sensor_msgs.msg;\n\npublic class GazeboSync : MonoBehaviour\n{\n    private ROSConnection ros;\n    \n    void Start()\n    {\n        ros = ROSConnection.GetOrCreateInstance();\n        ros.Subscribe<JointState>("/humanoid/joint_states", UpdateRobotPose);\n    }\n    \n    void UpdateRobotPose(JointState jointState)\n    {\n        // Update Unity robot pose based on Gazebo joint states\n        // This syncs Unity visualization with Gazebo physics\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"step-7-debugging-common-issues",children:"Step 7: Debugging Common Issues"}),"\n",(0,t.jsx)(e.h4,{id:"issue-1-unity-cant-connect-to-ros-2",children:"Issue 1: Unity Can't Connect to ROS 2"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Symptoms"}),": Connection timeout, no messages"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Solutions"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# Verify ROS-TCP endpoint running\nps aux | grep ros_tcp_endpoint\n\n# Check firewall\nsudo ufw allow 10000/tcp\n\n# Verify ROS 2 running\nros2 node list\n"})}),"\n",(0,t.jsx)(e.h4,{id:"issue-2-robot-model-not-visible",children:"Issue 2: Robot Model Not Visible"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Symptoms"}),": Empty scene, no robot"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Solutions"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Check camera position/orientation"}),"\n",(0,t.jsx)(e.li,{children:"Verify materials assigned"}),"\n",(0,t.jsx)(e.li,{children:"Check lighting (add Directional Light)"}),"\n",(0,t.jsx)(e.li,{children:"Verify GameObject hierarchy"}),"\n"]}),"\n",(0,t.jsx)(e.h4,{id:"issue-3-low-frame-rate",children:"Issue 3: Low Frame Rate"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Symptoms"}),": Laggy rendering"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Solutions"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Reduce render resolution"}),"\n",(0,t.jsx)(e.li,{children:"Disable ray tracing (if enabled)"}),"\n",(0,t.jsx)(e.li,{children:"Simplify materials/textures"}),"\n",(0,t.jsx)(e.li,{children:"Use LOD (Level of Detail) for distant objects"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"part-3-advanced-topics-optional",children:"Part 3: Advanced Topics (Optional)"}),"\n",(0,t.jsx)(e.h3,{id:"domain-randomization",children:"Domain Randomization"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Randomize"})," lighting, textures, object positions for robust ML training:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'void RandomizeEnvironment()\n{\n    // Random lighting\n    Light sun = GameObject.Find("Directional Light").GetComponent<Light>();\n    sun.intensity = Random.Range(0.5f, 3.0f);\n    sun.color = Random.ColorHSV();\n    \n    // Random object positions\n    foreach (GameObject obj in sceneObjects)\n    {\n        obj.transform.position += Random.insideUnitSphere * 0.5f;\n    }\n    \n    // Random textures\n    // Apply random materials to objects\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"ros-2-action-integration",children:"ROS 2 Action Integration"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Use ROS 2 Actions"})," for long-running tasks:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:"using Unity.Robotics.ROSTCPConnector;\nusing nav2_msgs.action;\n\npublic class NavigationAction : MonoBehaviour\n{\n    private ROSConnection ros;\n    \n    void Start()\n    {\n        ros = ROSConnection.GetOrCreateInstance();\n        // Send navigation goal via ROS 2 Action\n    }\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"integration-with-capstone",children:"Integration with Capstone"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"How this chapter contributes"})," to the Week 13 autonomous humanoid:"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Visual validation"}),": Capstone will use Unity for photorealistic testing"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Training data"}),": Generate synthetic images for vision model training"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Presentation"}),": Professional Unity renders for demo videos"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Multi-modal"}),": Combine Gazebo physics with Unity visuals"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"Understanding Unity integration now enables photorealistic capstone demonstrations."}),"\n",(0,t.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(e.p,{children:"You learned:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u2705 Set up ",(0,t.jsx)(e.strong,{children:"Unity-ROS 2 bridge"})," for bidirectional communication"]}),"\n",(0,t.jsxs)(e.li,{children:["\u2705 Imported ",(0,t.jsx)(e.strong,{children:"robot models"})," into Unity with materials and lighting"]}),"\n",(0,t.jsxs)(e.li,{children:["\u2705 Configured ",(0,t.jsx)(e.strong,{children:"photorealistic rendering"})," (HDRP, ray tracing)"]}),"\n",(0,t.jsxs)(e.li,{children:["\u2705 Generated ",(0,t.jsx)(e.strong,{children:"synthetic training data"})," (RGB images, depth maps)"]}),"\n",(0,t.jsxs)(e.li,{children:["\u2705 Integrated ",(0,t.jsx)(e.strong,{children:"Unity with Gazebo"})," for dual simulation"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Next steps"}),": Module 3 (NVIDIA Isaac Sim) will build on Gazebo physics and Unity rendering for advanced simulation workflows."]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"exercises",children:"Exercises"}),"\n",(0,t.jsx)(e.h3,{id:"exercise-1-unity-ros-2-communication-required",children:"Exercise 1: Unity-ROS 2 Communication (Required)"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Objective"}),": Establish bidirectional communication between Unity and ROS 2."]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Tasks"}),":"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Set up ROS-TCP-Connector in Unity"}),"\n",(0,t.jsx)(e.li,{children:"Create ROS connection script"}),"\n",(0,t.jsx)(e.li,{children:"Publish joint states from Unity to ROS 2"}),"\n",(0,t.jsx)(e.li,{children:"Subscribe to velocity commands in Unity from ROS 2"}),"\n",(0,t.jsxs)(e.li,{children:["Verify communication with ",(0,t.jsx)(e.code,{children:"ros2 topic echo/list"})]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Unity connects to ROS 2 successfully"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Joint states published to ROS 2 topic"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Velocity commands received in Unity"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","No connection errors"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Estimated Time"}),": 90 minutes"]}),"\n",(0,t.jsx)(e.h3,{id:"exercise-2-photorealistic-scene-required",children:"Exercise 2: Photorealistic Scene (Required)"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Objective"}),": Create realistic environment in Unity."]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Tasks"}),":"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Import or create humanoid robot model"}),"\n",(0,t.jsx)(e.li,{children:"Add realistic materials (metal, plastic, rubber)"}),"\n",(0,t.jsx)(e.li,{children:"Configure HDRP lighting (directional light, sky)"}),"\n",(0,t.jsx)(e.li,{children:"Add environment objects (tables, chairs, objects)"}),"\n",(0,t.jsx)(e.li,{children:"Capture rendered images"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Scene looks photorealistic"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Robot model visible and properly lit"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Shadows and reflections working"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Images saved successfully"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Estimated Time"}),": 120 minutes"]}),"\n",(0,t.jsx)(e.h3,{id:"exercise-3-synthetic-data-generation-challenge",children:"Exercise 3: Synthetic Data Generation (Challenge)"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Objective"}),": Generate dataset of synthetic images for ML training."]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Tasks"}),":"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Create data collection script"}),"\n",(0,t.jsx)(e.li,{children:"Randomize camera positions/orientations"}),"\n",(0,t.jsx)(e.li,{children:"Randomize lighting and object positions"}),"\n",(0,t.jsx)(e.li,{children:"Generate 100+ images with labels"}),"\n",(0,t.jsx)(e.li,{children:"Export dataset in standard format (COCO, YOLO)"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Requirements"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"100+ RGB images"}),"\n",(0,t.jsx)(e.li,{children:"Corresponding depth maps (optional)"}),"\n",(0,t.jsx)(e.li,{children:"Bounding box labels (if object detection)"}),"\n",(0,t.jsx)(e.li,{children:"Metadata file (JSON/YAML)"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Estimated Time"}),": 180 minutes"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"https://github.com/Unity-Technologies/Unity-Robotics-Hub",children:"Unity Robotics Hub"})," - Official Unity robotics tools"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"https://github.com/Unity-Technologies/ROS-TCP-Connector",children:"ROS-TCP-Connector"})," - Unity-ROS bridge"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"https://docs.unity3d.com/Packages/com.unity.render-pipelines.high-definition@latest/",children:"Unity HDRP Documentation"})," - High Definition Render Pipeline"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"https://unity.com/solutions/automotive-transportation/manufacturing/synthetic-data",children:"Synthetic Data Generation"})," - Unity synthetic data tools"]}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Next"}),": ",(0,t.jsx)(e.a,{href:"/physical-ai-humanoid-robotics-book/docs/module-3/intro",children:"Module 3: The AI-Robot Brain (NVIDIA Isaac) \u2192"})]})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>o,x:()=>l});var s=i(6540);const t={},r=s.createContext(t);function o(n){const e=s.useContext(r);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:o(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);